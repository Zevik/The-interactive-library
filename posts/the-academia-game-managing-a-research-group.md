---
title: "××©×—×§ ×”××§×“××™×”: ×”××¡×¢ ×œ×¤×¨×•×¤×¡×•×¨×”"
english_slug: the-academia-game-managing-a-research-group
category: "×—×©×™×‘×” ×‘×™×§×•×¨×ª×™×ª"
tags: [××§×“××™×”, × ×™×”×•×œ ××—×§×¨, ××™××•×Ÿ ××“×¢×™, ×¤×¨×¡×•× ××§×“××™, ×¡×™××•×œ×¦×™×”, ××©×—×§]
---
<h1>××©×—×§ ×”××§×“××™×”: ×”××¡×¢ ×œ×¤×¨×•×¤×¡×•×¨×”</h1>
<p>×¦×/×™ ×œ××¡×¢ ××¨×ª×§ ××œ ×¤×¡×’×ª ×”××§×“××™×”! ×”×× ×”×¦×œ×—×” ××“×¢×™×ª ×˜××•× ×” ×¨×§ ×‘×ª×’×œ×™×•×ª ×’××•× ×™×•×ª, ××• ×©×× × ×™×”×•×œ ×ª×§×¦×™×‘ ×—×›×, ×’×™×•×¡ ××©××‘×™× ×‘×œ×ª×™ ×¤×•×¡×§, ×•×‘× ×™×™×ª ××•× ×™×˜×™×Ÿ ×“×¨×š ×¤×¨×¡×•××™× ×”× ×”××¤×ª×—? ×”×ª× ×¡×”/×™ ×‘× ×™×”×•×œ ×§×‘×•×¦×ª ××—×§×¨ ××§×“××™×ª ×•×”×‘×Ÿ/×™ ××ª ×”××ª×’×¨×™×, ×”×¡×™×›×•× ×™× ×•×”×”×–×“×× ×•×™×•×ª ×”× ×¡×ª×¨×•×ª ×‘××¡×¢ ×œ×¤×¨×•×¤×¡×•×¨×”.</p>

<div id="academia-game-app">
    <div id="dashboard" class="game-panel">
        <h2>×œ×•×— ×‘×§×¨×” ××§×“××™</h2>
        <div class="stats-grid">
            <div><strong>×©× ×” ××§×“××™×ª:</strong> <span id="current-year" class="stat-value">1</span></div>
            <div><strong>×××–×Ÿ ×ª×§×¦×™×‘×™:</strong> $<span id="budget" class="stat-value">0</span></div>
            <div><strong>×¦×•×•×ª ××—×§×¨:</strong> <span id="team-size" class="stat-value">0</span> ×—×‘×¨×™ ×¦×•×•×ª</div>
            <div><strong>×¢×œ×•×ª ×¦×•×•×ª ×©× ×ª×™×ª:</strong> $<span id="yearly-cost" class="stat-value">0</span></div>
            <div><strong>×¤×¨×¡×•××™× ××•×›×¨×™×:</strong> <span id="publications" class="stat-value">0</span></div>
            <div><strong>×™×“×¢ ×•×¤×•×˜× ×¦×™××œ ××“×¢×™:</strong> <span id="research-points" class="stat-value">0</span> × ×§×•×“×•×ª</div>
            <div><strong>××•× ×™×˜×™×Ÿ ××§×“××™:</strong> <span id="reputation" class="stat-value">0</span> × ×§×•×“×•×ª ××•× ×™×˜×™×Ÿ</div>
             <div><strong>×¤×¢×™×œ×•×™×•×ª ×‘×”××ª× ×”:</strong> <span id="pending-submissions" class="stat-value">0</span> (×‘×§×©×•×ª ××™××•×Ÿ ×•××××¨×™×)</div>
        </div>
    </div>

    <div id="decision-area" class="game-panel">
        <h2>×”×—×œ×˜×•×ª ××¡×˜×¨×˜×’×™×•×ª ×œ×©× ×” <span class="current-year-label stat-value">1</span></h2>
        <div class="decision-section">
            <h3><i class="icon-money"></i> ×’×™×•×¡ ××™××•×Ÿ ×œ××—×§×¨:</h3>
            <p>×”×©×§×¢/×™ ×‘×¤× ×™×™×” ×œ×§×¨× ×•×ª ××—×§×¨ ×™×•×§×¨×ª×™×•×ª:</p>
            <button class="action-button grant-button" data-grant-id="1">××¢× ×§ ×‘×¡×™×¡×™ (×¢×œ×•×ª ×”×’×©×”: $5k, ×¤×•×˜× ×¦×™××œ ×–×›×™×™×”: $100k, ×¡×™×›×•×™ ×‘×¡×™×¡×™: 60%)</button>
            <button class="action-button grant-button" data-grant-id="2">××¢× ×§ ×ª×—×¨×•×ª×™ (×¢×œ×•×ª ×”×’×©×”: $20k, ×¤×•×˜× ×¦×™××œ ×–×›×™×™×”: $500k, ×¡×™×›×•×™ ×‘×¡×™×¡×™: 30%)</button>
            <button class="action-button grant-button" data-grant-id="3">××¢× ×§ ×™×•×§×¨×ª×™ (×¢×œ×•×ª ×”×’×©×”: $50k, ×¤×•×˜× ×¦×™××œ ×–×›×™×™×”: $2M, ×¡×™×›×•×™ ×‘×¡×™×¡×™: 10%)</button>
             <p class="decision-status" id="grant-decision-status"></p>
        </div>

        <div class="decision-section">
            <h3><i class="icon-team"></i> ×‘× ×™×™×ª ×¦×•×•×ª ××—×§×¨:</h3>
             <p>×’×™×™×¡/×™ ××•×—×•×ª ××‘×¨×™×§×™× ×©×™× ×™×¢×• ××ª ×”××—×§×¨:</p>
            <button class="action-button hire-button" data-researcher-type="phd">×¦×¨×£/×™ ×“×•×§×˜×•×¨× ×˜/×™×ª (×¢×œ×•×ª ×©× ×ª×™×ª: $40k, ×ª×¨×•××” ×œ××—×§×¨: +5 × ×§×•×“×•×ª ×™×“×¢ ×œ×©× ×”)</button>
            <button class="action-button hire-button" data-researcher-type="postdoc">×¦×¨×£/×™ ×¤×•×¡×˜-×“×•×§×˜×•×¨× ×˜/×™×ª (×¢×œ×•×ª ×©× ×ª×™×ª: $70k, ×ª×¨×•××” ×œ××—×§×¨: +15 × ×§×•×“×•×ª ×™×“×¢ ×œ×©× ×”)</button>
             <p class="decision-status" id="hire-decision-status"></p>
        </div>

         <div class="decision-section">
            <h3><i class="icon-publish"></i> ×¤×¨×¡×•× ×ª×’×œ×™×•×ª ××“×¢×™×•×ª:</h3>
             <p>×”×¤×•×š/×™ ××ª ×”×™×“×¢ ×©×¦×‘×¨×ª/×” ×œ×”×›×¨×” ×‘×™× ×œ××•××™×ª:</p>
            <button id="publish-button" class="action-button" disabled>× ×¡×”/×™ ×œ×¤×¨×¡× ××××¨ (×¢×œ×•×ª ×ª×”×œ×™×š: $10k, ×“×•×¨×© 50 × ×§×•×“×•×ª ×™×“×¢)</button>
             <p class="decision-status" id="publish-decision-status"></p>
        </div>

        <button id="next-year-button" class="action-button primary-button">×¢×‘×•×¨/×™ ×œ×©× ×” ×”××§×“××™×ª ×”×‘××” Â»</button>
    </div>

    <div id="events-log" class="game-panel">
        <h2>×™×•××Ÿ ××™×¨×•×¢×™× ××§×“××™</h2>
        <ul id="event-list">
            <li class="event-info">×”×ª×—×œ×ª ××ª ×“×¨×›×š ×›×—×•×§×¨/×ª ×‘×›×™×¨/×” ×—×“×©/×”!</li>
             <li class="event-success">×§×™×‘×œ×ª ×ª×§×¦×™×‘ ×”×ª×—×œ×ª×™ ×‘×¡×š $100,000 ×œ×”×§××ª ×§×‘×•×¦×ª ×”××—×§×¨.</li>
        </ul>
    </div>
</div>

<style>
    :root {
        --primary-color: #0056b3;
        --secondary-color: #f0f8ff;
        --panel-bg: #ffffff;
        --panel-border: #e0e0e0;
        --button-bg: #e9ecef;
        --button-hover-bg: #ced4da;
        --button-primary-bg: #28a745;
        --button-primary-hover-bg: #218838;
        --text-color: #343a40;
        --header-color: #004085;
        --success-color: #28a745;
        --danger-color: #dc3545;
        --warning-color: #ffc107;
        --info-color: #17a2b8;
        --font-family: 'Arial', sans-serif;
    }

    #academia-game-app {
        font-family: var(--font-family);
        direction: rtl;
        text-align: right;
        max-width: 900px;
        margin: 30px auto;
        padding: 20px;
        background-color: var(--secondary-color);
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        display: grid;
        grid-template-columns: 1fr; /* Stack panels on smaller screens */
        gap: 20px;
    }

    @media (min-width: 768px) {
         #academia-game-app {
            grid-template-columns: 1fr 1fr; /* Two columns on larger screens */
         }
         #dashboard {
            grid-column: 1 / 3; /* Dashboard spans two columns */
         }
         #decision-area {
            grid-column: 1 / 3; /* Decision area spans two columns */
         }
         #events-log {
             grid-column: 1 / 3; /* Events log spans two columns */
         }
    }


    .game-panel {
        background-color: var(--panel-bg);
        border: 1px solid var(--panel-border);
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    }

    h1 {
        text-align: center;
        color: var(--primary-color);
        margin-bottom: 20px;
        font-size: 1.8em;
    }

    h2 {
        color: var(--header-color);
        margin-top: 0;
        margin-bottom: 15px;
        border-bottom: 2px solid var(--panel-border);
        padding-bottom: 10px;
        font-size: 1.4em;
    }

    h3 {
        color: var(--text-color);
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 1.1em;
    }

    p {
        color: var(--text-color);
        line-height: 1.6;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
    }

    .stats-grid > div {
         padding: 8px 0;
         border-bottom: 1px dotted var(--panel-border);
    }

     .stats-grid > div:last-child {
         border-bottom: none;
     }


    .stat-value {
        font-weight: bold;
        color: var(--primary-color);
    }

    .decision-section {
        margin-bottom: 25px;
        padding: 15px;
        border: 1px solid var(--panel-border);
        border-radius: 8px;
        background-color: #f8f9fa;
    }

    .action-button {
        margin: 5px;
        padding: 12px 20px;
        cursor: pointer;
        border: none; /* Use background/box-shadow instead of border */
        border-radius: 5px;
        background-color: var(--button-bg);
        color: var(--text-color);
        font-size: 1em;
        transition: background-color 0.3s ease, transform 0.1s ease;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    }

    .action-button:hover:not(:disabled) {
        background-color: var(--button-hover-bg);
        transform: translateY(-1px);
    }

    .action-button:active:not(:disabled) {
         transform: translateY(0);
         box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
    }

    .action-button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        box-shadow: none;
    }

    .primary-button {
        background-color: var(--button-primary-bg);
        color: white;
        font-weight: bold;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .primary-button:hover:not(:disabled) {
        background-color: var(--button-primary-hover-bg);
    }

    #next-year-button {
        display: block;
        width: 100%;
        margin-top: 30px;
        padding: 15px;
        font-size: 1.2em;
    }

    .decision-status {
        margin-top: 10px;
        font-style: italic;
        color: var(--text-color);
        font-size: 0.9em;
    }

    #events-log {
        max-height: 300px; /* Make log scrollable */
        overflow-y: auto;
    }

    #event-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    #event-list li {
        margin-bottom: 10px;
        padding-bottom: 8px;
        border-bottom: 1px dotted var(--panel-border);
        font-size: 0.95em;
        line-height: 1.5;
        opacity: 0; /* Start invisible for animation */
        transform: translateY(10px); /* Start slightly below */
        animation: fadeSlideIn 0.5s ease forwards; /* Animation applied by JS, but define here */
    }

    #event-list li:last-child {
         border-bottom: none;
     }

     .event-info { color: var(--info-color); }
     .event-success { color: var(--success-color); font-weight: bold; }
     .event-danger { color: var(--danger-color); font-weight: bold; }
     .event-warning { color: var(--warning-color); }

     /* Add simple icons (using text for now) */
     .decision-section h3 i {
         margin-left: 5px;
         color: var(--primary-color);
     }
     .icon-money::before { content: 'ğŸ’°'; }
     .icon-team::before { content: 'ğŸ‘¥'; }
     .icon-publish::before { content: 'ğŸ“š'; }


     /* Animations */
    @keyframes fadeSlideIn {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes flashGreen {
        0% { background-color: inherit; }
        50% { background-color: rgba(40, 167, 69, 0.3); } /* success-color with alpha */
        100% { background-color: inherit; }
    }

     @keyframes flashRed {
        0% { background-color: inherit; }
        50% { background-color: rgba(220, 53, 69, 0.3); } /* danger-color with alpha */
        100% { background-color: inherit; }
    }

     .flash-green { animation: flashGreen 1s ease; }
     .flash-red { animation: flashRed 1s ease; }


     /* Explanation Section */
     #explanation-toggle {
        display: block;
        width: 100%;
        padding: 15px;
        background-color: var(--primary-color);
        color: white;
        border: none;
        font-size: 1.1em;
        margin-top: 30px;
        margin-bottom: 20px;
        cursor: pointer;
        border-radius: 8px;
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
     }

    #explanation-toggle:hover {
        background-color: #004085;
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
    }


    #explanation {
        display: none; /* Initially hidden */
        margin-top: 20px;
        padding: 25px;
        border: 1px solid var(--panel-border);
        border-radius: 8px;
        background-color: #f8f9fa;
        direction: rtl;
        text-align: right;
        line-height: 1.7;
    }

    #explanation h2, #explanation h3 {
        color: var(--header-color);
        margin-bottom: 10px;
        border-bottom: none;
        padding-bottom: 0;
    }

    #explanation h2 { font-size: 1.5em; border-bottom: 2px solid var(--panel-border); padding-bottom: 10px; margin-bottom: 15px;}
    #explanation h3 { font-size: 1.2em; margin-top: 20px; }

    #explanation p, #explanation ul {
        margin-bottom: 15px;
        line-height: 1.6;
    }

    #explanation ul {
        padding-right: 20px;
        list-style: disc;
    }

     #explanation li {
         margin-bottom: 8px;
         line-height: 1.5;
     }
</style>

<button id="explanation-toggle">×”×¦×’/×”×¡×ª×¨: ××“×¨×™×š ×œ××¡×¢ ×”××§×“××™</button>

<div id="explanation">
    <h2>××“×¨×™×š ×œ××¡×¢ ×”××§×“××™: × ×™×”×•×œ ×§×‘×•×¦×ª ××—×§×¨</h2>
    <p>×”×”×¦×œ×—×” ×‘×–×™×¨×” ×”××§×“××™×ª ××™× ×” ××¡×ª×›××ª ××š ×•×¨×§ ×‘×’××•× ×•×ª ××“×¢×™×ª ×˜×”×•×¨×”. ×”×™× ×“×•×¨×©×ª ×©×™×œ×•×‘ × ×“×™×¨ ×©×œ ×—×©×™×‘×” ×¤×•×¨×¦×ª ×“×¨×š ×¢× ×›×™×©×•×¨×™× × ×™×”×•×œ×™×™×, ×¤×™× × ×¡×™×™×, ×•×™×›×•×œ×ª ×œ×‘× ×•×ª ×§×©×¨×™× ×•×œ×”×¦×™×’ ××ª ×¢×‘×•×“×ª×š ×œ×¢×•×œ×. ×”×¡×™××•×œ×¦×™×” ×©×–×” ×¢×ª×” ×—×•×•×™×ª× ××“××” ××ª ×”××ª×’×¨×™× ×•×”×”×–×“×× ×•×™×•×ª ×”××¨×›×–×™×™× ×”××¢×¦×‘×™× ××ª ××¡×¢×• ×©×œ ×—×•×§×¨/×ª ×‘×›×™×¨/×”.</p>

    <h3>×”×œ×™×‘×”: ×§×‘×•×¦×ª ×”××—×§×¨ (×”×œ××‘)</h3>
    <p>×§×‘×•×¦×ª ××—×§×¨ ××§×“××™×ª (×”××›×•× ×” ×œ×¨×•×‘ "×”×œ××‘") ×”×™× ×”×™×—×™×“×” ×”××¨×›×–×™×ª ×‘×” ××ª×¨×—×© ×”××—×§×¨ ×‘×¤×•×¢×œ. ×”×™× ×× ×•×”×œ×ª ×¢×œ ×™×“×™ ×—×•×§×¨/×ª ×‘×›×™×¨/×” (Principal Investigator - PI), ×œ×¨×•×‘ ×¤×¨×•×¤×¡×•×¨/×™×ª. ×”×œ×‘ ×”×¤×•×¢× ×©×œ ×”×œ××‘ ×”×•× ×¦×•×•×ª ×”××—×§×¨ â€“ ×ª×œ××™×“×™ ××—×§×¨ (×××¡×˜×¨, ×“×•×§×˜×•×¨×˜) ×•×¤×•×¡×˜-×“×•×§×˜×•×¨× ×˜×™×, ×”××§×“×™×©×™× ××ª ×–×× × ×•×›×©×¨×•× × ×œ×§×™×“×•× ×¤×¨×•×™×§×˜×™× ××—×§×¨×™×™× ×ª×—×ª ×”× ×—×™×™×ª ×”-PI. ×›×›×œ ×©×”×¦×•×•×ª ×’×“×•×œ ×•×× ×•×¡×” ×™×•×ª×¨, ×›×š ×’×“×œ ×¤×•×˜× ×¦×™××œ ×™×¦×™×¨×ª ×”×™×“×¢ ×”××“×¢×™.</p>

    <h3>×”×× ×•×¢: ××™××•×Ÿ ××—×§×¨ (×”××¢× ×§×™×)</h3>
    <p>××—×§×¨ ××“×¢×™ ×”×•× ×¤×¢×™×œ×•×ª ×™×§×¨×”. ×”×•× ×“×•×¨×© ×¦×™×•×“ ××ª×§×“×, ×—×•××¨×™× ×™×§×¨×™×, × ×¡×™×¢×•×ª ×œ×›× ×¡×™×, ×•×œ×¨×•×‘, ×•×‘×¢×™×§×¨, ××™××•×Ÿ ×œ××œ×’×•×ª ×•××©×›×•×¨×•×ª ×œ×—×‘×¨×™ ×”×¦×•×•×ª. ×¨×•×‘ ××•×—×œ×˜ ×©×œ ××™××•×Ÿ ×–×” ××’×™×¢ ×××¢× ×§×™ ××—×§×¨ ×ª×—×¨×•×ª×™×™×. ×”×’×©×ª ×‘×§×©×” ×œ××¢× ×§ ×”×™× ×ª×”×œ×™×š ××•×¨×›×‘ ×•×ª×—×¨×•×ª×™ ×‘×™×•×ª×¨, ×”×“×•×¨×© × ×™×¡×•×— ×”×¦×¢×ª ××—×§×¨ ××¤×•×¨×˜×ª ×•××©×›× ×¢×ª, ×”×¦×’×ª ×ª×§×¦×™×‘ ×¨×™××œ×™, ×•×”×“×’×©×ª ×™×›×•×œ×•×ª×™×• ×”××“×¢×™×•×ª ×•×”× ×™×”×•×œ×™×•×ª ×©×œ ×”-PI ×•×”×¦×•×•×ª. ×–×›×™×™×” ×‘××¢× ×§ ××™× ×” ×¨×§ ××§×•×¨ ××™××•×Ÿ ×—×™×•× ×™, ××œ× ×’× ××™×©×•×¨ ×—×™×¦×•× ×™ ×œ×¢×¨×š ×”××—×§×¨ ×•×”×—×•×§×¨, ×•×‘×›×š ×ª×•×¨××ª ××©××¢×•×ª×™×ª ×œ××•× ×™×˜×™×Ÿ ×”××§×“××™.</p>

    <h3>×”×”×“: ×¤×¨×¡×•× ××“×¢×™</h3>
    <p>×ª×•×¦×¨ ×”×“×’×œ ×©×œ ×§×‘×•×¦×ª ××—×§×¨ ×”×•× ×¤×¨×¡×•× ×××¦××™×” ×‘×›×ª×‘×™ ×¢×ª ××“×¢×™×™× ××•×‘×™×œ×™×. ×¤×¨×¡×•× ×”×•× ×”×“×¨×š ×”××¨×›×–×™×ª ×œ×—×œ×•×§ ×ª×’×œ×™×•×ª ×—×“×©×•×ª ×¢× ×”×§×”×™×œ×” ×”××“×¢×™×ª ×”×¢×•×œ××™×ª. ×ª×”×œ×™×š ×”×¤×¨×¡×•× ××¨×•×š ×•×××ª×’×¨ ×•×›×•×œ×œ:</p>
    <ul>
        <li><strong>×›×ª×™×‘×ª ×”××××¨:</strong> ×”×¦×’×” ×©×™×˜×ª×™×ª ×©×œ ×©××œ×ª ×”××—×§×¨, ×”×©×™×˜×•×ª, ×”×ª×•×¦××•×ª ×•×”××¡×§× ×•×ª.</li>
        <li><strong>×”×’×©×” ×œ×›×ª×‘ ×¢×ª:</strong> ×‘×—×™×¨×ª ×›×ª×‘ ×¢×ª ××ª××™× ×•×”×’×©×ª ×”××××¨.</li>
        <li><strong>×©×™×¤×•×˜ ×¢××™×ª×™× (Peer Review):</strong> ×—×•×§×¨×™× ××—×¨×™× ×‘×ª×—×•× ×‘×•×—× ×™× ××ª ×”××××¨ ×‘×§×¤×™×“×”, ×•××¡×¤×§×™× ×‘×™×§×•×¨×ª ×•×”×¢×¨×•×ª ×œ×¢×•×¨×š ×›×ª×‘ ×”×¢×ª. ×©×œ×‘ ×–×” ×§×¨×™×˜×™ ×œ××™×›×•×ª ×”××“×¢×™×ª.</li>
        <li><strong>×ª×™×§×•× ×™×:</strong> ×›××¢×˜ ×ª××™×“ × ×“×¨×©×™× ×ª×™×§×•× ×™× ××©××¢×•×ª×™×™× ××• ×§×˜× ×™× ×¢×œ ×¡××š ×”×¢×¨×•×ª ×”×©×•×¤×˜×™×. ×œ×¢×™×ª×™× ×§×¨×•×‘×•×ª × ×“×¨×©×™× ×’× × ×™×¡×•×™×™× × ×•×¡×¤×™×.</li>
        <li><strong>×§×‘×œ×” ××• ×“×—×™×™×”:</strong> ×¨×§ ×—×œ×§ ×§×˜×Ÿ ××”××××¨×™× ×©××•×’×©×™× ×œ×›×ª×‘×™ ×¢×ª ×™×•×§×¨×ª×™×™× ××ª×§×‘×œ×™× ×‘×¡×•×¤×• ×©×œ ×“×‘×¨ ×œ×¤×¨×¡×•×.</li>
    </ul>

    <h3>×”××©×•×•××” ×”××§×“××™×ª: ××™××•×Ÿ + ×¤×¨×¡×•× = ×§×™×“×•× (Publish or Perish)</h3>
    <p>×§×™×“×•× ××§×“××™ - ×××¨×¦×” ×‘×›×™×¨ ×œ×¤×¨×•×¤×¡×•×¨ ×—×‘×¨, ×•××× ×• ×œ×¤×¨×•×¤×¡×•×¨ ××Ÿ ×”×× ×™×™×Ÿ - ×ª×œ×•×™ ×‘××•×¤×Ÿ ×“×¨××˜×™ ×‘×™×›×•×œ×ª×• ×©×œ ×”×—×•×§×¨ ×œ×”×¨××•×ª ×ª×¨×•××” ××©××¢×•×ª×™×ª ×•××ª××©×›×ª ×œ×ª×—×•× ×”××—×§×¨. ×©× ×™ ×”××™× ×“×™×§×˜×•×¨×™× ×”××¨×›×–×™×™× ×œ×›×š ×”×: ×”×¦×œ×—×” ×¢×§×‘×™×ª ×‘×’×™×•×¡ ××™××•×Ÿ (××¢× ×§×™× ×¨×‘×™× ×•×’×“×•×œ×™×) ×•×¨×©×™××ª ×¤×¨×¡×•××™× ××¨×©×™××” ×‘×›×ª×‘×™ ×¢×ª ×‘×¢×œ×™ ×”×©×¤×¢×” ×’×‘×•×”×”. ××¢× ×§×™× ××¨××™× ×™×›×•×œ×ª ×œ×”×•×‘×™×œ ×•×œ×”×©×™×’ ××©××‘×™×, ×•×¤×¨×¡×•××™× ××•×›×™×—×™× ××ª ×”×ª×¨×•××” ×”×××™×ª×™×ª ×œ×™×“×¢. ×œ×œ× ×©× ×™×”×, ×”×“×¨×š ×œ×§×™×“×•×, ×•××£ ×œ×¢×™×ª×™× ×”×”×™×©××¨×•×ª ×‘××¢×¨×›×ª, ×§×©×” ×¢×“ ×‘×œ×ª×™ ××¤×©×¨×™×ª. ×–×”×• ×”××§×•×¨ ×œ×‘×™×˜×•×™ ×”×™×“×•×¢ ×œ×©××¦×” 'Publish or Perish' (×¤×¨×¡× ××• ××‘×“).</p>

    <h3>××ª×’×¨×™× ×œ××•×¨×š ×”×“×¨×š</h3>
    <ul>
        <li><strong>× ×™×”×•×œ ×ª×§×¦×™×‘:</strong> ××¢× ×§×™× ××’×™×¢×™× ×œ×ª×§×•×¤×•×ª ××•×’×‘×œ×•×ª, ×•× ×“×¨×© ×ª×›× ×•×Ÿ ×§×¤×“× ×™ ×›×“×™ ×œ×××Ÿ ××ª ×¤×¢×™×œ×•×ª ×”×œ××‘ ×œ××•×¨×š ×©× ×™×. ×”×•×¦××•×ª ×‘×œ×ª×™ ×¦×¤×•×™×•×ª ×ª××™×“ ××•×¨×‘×•×ª ××¢×‘×¨ ×œ×¤×™× ×”.</li>
        <li><strong>× ×™×”×•×œ ×¦×•×•×ª:</strong> ×”× ×—×™×™×ª ×—×‘×¨×™ ×¦×•×•×ª, ×©××™×¨×” ×¢×œ ××•×˜×™×‘×¦×™×”, ×”×ª××•×“×“×•×ª ×¢× ×§×©×™×™× ××™×©×™×™× ×•××§×¦×•×¢×™×™×, ×•×›×Ÿ ×¢× ×¢×–×™×‘×ª ×—×•×§×¨×™× ×œ×§×¨××ª ×”×©×œ××ª ×œ×™××•×“×™×”× ××• ×œ××©×¨×•×ª ××—×¨×•×ª.</li>
        <li><strong>××™×–×•×Ÿ ×–×× ×™×:</strong> ×”×§×¦××ª ×–××Ÿ × ×›×•×Ÿ ×‘×™×Ÿ ××—×§×¨ ×‘×¤×•×¢×œ, ×›×ª×™×‘×ª ×”×¦×¢×•×ª ××—×§×¨, ×›×ª×™×‘×ª ××××¨×™×, ×”×•×¨××”, ××˜×œ×•×ª ××“××™× ×™×¡×˜×¨×˜×™×‘×™×•×ª, ×‘× ×™×™×ª ×§×©×¨×™× ×•×¢×•×“.</li>
        <li><strong>×”×ª××•×“×“×•×ª ×¢× ×“×—×™×•×ª:</strong> ×“×—×™×•×ª ×”×Ÿ ×—×œ×§ ×‘×œ×ª×™ × ×¤×¨×“ ××”×—×™×™× ×”××§×“××™×™× (×“×—×™×•×ª ××¢× ×§×™×, ×“×—×™×•×ª ××××¨×™×). × ×“×¨×©×ª ×¢××™×“×•×ª × ×¤×©×™×ª ×’×‘×•×”×” ×•×××•× ×” ×‘×¢×‘×•×“×”.</li>
        <li><strong>×‘×—×™×¨×•×ª ××¡×˜×¨×˜×’×™×•×ª:</strong> ××™×œ×• ×¤×¨×•×™×§×˜×™× ×œ×§×—×ª? ×”×× ×œ×”×©×§×™×¢ ×‘×¤×¨×•×™×§×˜ ××¡×•×›×Ÿ ×•×¤×•×¨×¥ ×“×¨×š ×¤×•×˜× ×¦×™××œ×™×ª, ××• ×‘×¤×¨×•×™×§×˜ ×‘×˜×•×— ×™×•×ª×¨ ××š ×¢× ×¤×•×˜× ×¦×™××œ ×ª×’×œ×™×ª × ××•×š ×™×•×ª×¨, ×©×™× ×™×‘ ×¤×¨×¡×•× ××”×™×¨ ×™×—×¡×™×ª?</li>
    </ul>

    <h3>×”×“×¨×š ×œ×¤×¨×•×¤×¡×•×¨×”: ×ª××”×™×œ ×× ×¦×—</h3>
    <p>××¡×¢ ××•×¦×œ×— ×œ×¤×¨×•×¤×¡×•×¨×” ×“×•×¨×© ×©×™×œ×•×‘ ×¡×™× ×¨×’×˜×™ ×©×œ ××¦×•×™× ×•×ª ××“×¢×™×ª, ×™×¦×™×¨×ª×™×•×ª, ×¤×¨×•×“×•×§×˜×™×‘×™×•×ª ×’×‘×•×”×” (×¤×¨×¡×•××™× ×¨×‘×™× ×•××™×›×•×ª×™×™×), ×™×›×•×œ×ª ××¨×©×™××” ×‘×’×™×•×¡ ××©××‘×™×, ×›×™×©×•×¨×™× × ×™×”×•×œ×™×™× ×•×”× ×—×™×™×ª×™×™×, ×‘× ×™×™×ª ×¨×©×ª ×§×©×¨×™× ×¢× ×¤×”, ×¢××™×“×•×ª × ×¤×©×™×ª, ×•×œ×‘×¡×•×£, ×ª×›× ×•×Ÿ ××¡×˜×¨×˜×’×™ ××¨×•×š ×˜×•×•×— ×©××˜×¨×ª×• ×œ×‘×¡×¡ ××ª ×”×—×•×§×¨ ×›××•×‘×™×œ/×” ×‘×ª×—×•××•/×”.</p>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Game State ---
        let year = 1;
        let budget = 100000; // Initial budget
        let teamSize = 0;
        let yearlyCost = 0;
        let publications = 0;
        let researchPoints = 0;
        let reputation = 0; // New: Academic Reputation
        let pendingGrants = []; // { id, potential, chance, name }
        let pendingPublications = []; // { cost, baseChance }
        let decisionsMadeThisYear = {
            grantApplied: false,
            publishAttempted: false
        };
        let gameEnded = false;

        // --- Game Constants ---
        const grants = {
            1: { name: "××¢× ×§ ×‘×¡×™×¡×™", applyCost: 5000, award: 100000, baseSuccessChance: 0.6, repGain: 5 },
            2: { name: "××¢× ×§ ×ª×—×¨×•×ª×™", applyCost: 20000, award: 500000, baseSuccessChance: 0.3, repGain: 15 },
            3: { name: "××¢× ×§ ×™×•×§×¨×ª×™", applyCost: 50000, award: 2000000, baseSuccessChance: 0.1, repGain: 40 }
        };
        const researcherCosts = {
            phd: 40000,
            postdoc: 70000
        };
         const researcherResearchPoints = {
            phd: 5,
            postdoc: 15
        };
        const publishCost = 10000;
        const publishResearchPointsRequired = 50;
        const publishBaseSuccessChance = 0.4; // Simplified average success chance
        const publishRepGain = 10;
        const reputationFactor = 0.003; // How much reputation affects chance (0.3% per rep point) - Fine-tune this

        // Win Condition
        const winConditionYears = 20;
        const winConditionPublications = 15;
        const winConditionBudget = 2000000; // $2M

        // --- DOM Elements ---
        const yearSpan = document.getElementById('current-year');
        const budgetSpan = document.getElementById('budget');
        const teamSizeSpan = document.getElementById('team-size');
        const yearlyCostSpan = document.getElementById('yearly-cost');
        const publicationsSpan = document.getElementById('publications');
        const researchPointsSpan = document.getElementById('research-points');
        const reputationSpan = document.getElementById('reputation'); // New Reputation span
        const pendingSubmissionsSpan = document.getElementById('pending-submissions');
        const eventList = document.getElementById('event-list');
        const grantButtons = document.querySelectorAll('.grant-button');
        const hireButtons = document.querySelectorAll('.hire-button');
        const publishButton = document.getElementById('publish-button');
        const nextYearButton = document.getElementById('next-year-button');
        const currentYearLabels = document.querySelectorAll('.current-year-label');
        const grantDecisionStatus = document.getElementById('grant-decision-status');
        const hireDecisionStatus = document.getElementById('hire-decision-status');
        const publishDecisionStatus = document.getElementById('publish-decision-status');
        const explanationDiv = document.getElementById('explanation');
        const explanationToggleBtn = document.getElementById('explanation-toggle');
        const academiaGameAppDiv = document.getElementById('academia-game-app');


        // --- Update UI Functions ---
        function updateDashboard() {
            yearSpan.textContent = year;
            budgetSpan.textContent = budget.toLocaleString();
            teamSizeSpan.textContent = teamSize;
            yearlyCostSpan.textContent = yearlyCost.toLocaleString();
            publicationsSpan.textContent = publications;
            researchPointsSpan.textContent = researchPoints;
            reputationSpan.textContent = reputation; // Update reputation
            pendingSubmissionsSpan.textContent = pendingGrants.length + pendingPublications.length;

            currentYearLabels.forEach(el => el.textContent = year);

             // Update publish button state
             const canPublish = researchPoints >= publishResearchPointsRequired && budget >= publishCost;
            if (canPublish && !decisionsMadeThisYear.publishAttempted) {
                publishButton.disabled = false;
                publishButton.textContent = `× ×¡×”/×™ ×œ×¤×¨×¡× ××××¨ (×¢×œ×•×ª: $${publishCost.toLocaleString()}, ×“×•×¨×© ${publishResearchPointsRequired} ×™×“×¢)`;
                publishDecisionStatus.textContent = `×“×¨×•×©×™×: ${publishResearchPointsRequired} ×™×“×¢, $${publishCost.toLocaleString()}. ×‘×¨×©×•×ª×š: ${researchPoints} ×™×“×¢, $${budget.toLocaleString()}.`;
            } else {
                 publishButton.disabled = true;
                 if (decisionsMadeThisYear.publishAttempted) {
                      publishButton.textContent = `× ×™×¡×™×ª ×œ×¤×¨×¡× ××××¨ ×”×©× ×”`;
                      publishDecisionStatus.textContent = "×”×•×’×©×” ×‘×§×©×” ×œ×¤×¨×¡×•× ××××¨ ×”×©× ×”.";
                 } else if (researchPoints < publishResearchPointsRequired && budget < publishCost) {
                     publishButton.textContent = `××™×Ÿ ××¡×¤×™×§ ×™×“×¢ (${researchPoints}/${publishResearchPointsRequired}) ××• ×ª×§×¦×™×‘ ($${budget.toLocaleString()}/${publishCost.toLocaleString()})`;
                      publishDecisionStatus.textContent = `×“×¨×•×©×™×: ${publishResearchPointsRequired} ×™×“×¢, $${publishCost.toLocaleString()}. ×‘×¨×©×•×ª×š: ${researchPoints} ×™×“×¢, $${budget.toLocaleString()}.`;
                 } else if (researchPoints < publishResearchPointsRequired) {
                     publishButton.textContent = `××™×Ÿ ××¡×¤×™×§ ×™×“×¢ (${researchPoints}/${publishResearchPointsRequired})`;
                     publishDecisionStatus.textContent = `×“×¨×•×©×™×: ${publishResearchPointsRequired} ×™×“×¢. ×‘×¨×©×•×ª×š: ${researchPoints}.`;
                 } else if (budget < publishCost) {
                      publishButton.textContent = `××™×Ÿ ××¡×¤×™×§ ×ª×§×¦×™×‘ ($${budget.toLocaleString()}/${publishCost.toLocaleString()})`;
                      publishDecisionStatus.textContent = `×“×¨×•×©: $${publishCost.toLocaleString()}. ×‘×¨×©×•×ª×š: $${budget.toLocaleString()}.`;
                 }
            }

             // Update grant button states
             if(decisionsMadeThisYear.grantApplied) {
                 grantButtons.forEach(btn => btn.disabled = true);
                 grantDecisionStatus.textContent = "×”×•×’×©×” ×‘×§×©×ª ××™××•×Ÿ ×”×©× ×”. ×”××ª×Ÿ/×™ ×œ×ª×•×¦××•×ª ×‘×©× ×” ×”×‘××”.";
             } else {
                  grantButtons.forEach(btn => {
                      const grantId = btn.dataset.grantId;
                      const grant = grants[grantId];
                      btn.disabled = budget < grant.applyCost;
                      btn.textContent = `${grant.name} (×¢×œ×•×ª: $${grant.applyCost.toLocaleString()}, ×¡×™×›×•×™ ××©×•×¢×¨: ${(grant.baseSuccessChance + reputation * reputationFactor)*100}%)$`;
                  });
                   grantDecisionStatus.textContent = budget < Math.min(grants[1].applyCost, grants[2].applyCost, grants[3].applyCost) ? "××™×Ÿ ××¡×¤×™×§ ×ª×§×¦×™×‘ ×œ×”×’×©×ª ×‘×§×©×ª ××™××•×Ÿ ×›×œ×©×”×™." : "";
             }

             // Update hire button states - always enabled if budget allows yearly cost
             hireButtons.forEach(btn => {
                const type = btn.dataset.researcherType;
                const cost = researcherCosts[type];
                // Can you afford the *next* yearly cost if you hire them? Simple check.
                btn.disabled = budget < yearlyCost + cost;
                btn.textContent = `×¦×¨×£/×™ ${type === 'phd' ? '×“×•×§×˜×•×¨× ×˜/×™×ª' : '×¤×•×¡×˜-×“×•×§×˜×•×¨× ×˜/×™×ª'} (×¢×œ×•×ª ×©× ×ª×™×ª: $${cost.toLocaleString()}, ×ª×¨×•××” ×œ××—×§×¨: +${researcherResearchPoints[type]} ×™×“×¢)`;
             });
             hireDecisionStatus.textContent = budget < yearlyCost + Math.min(researcherCosts.phd, researcherCosts.postdoc) && teamSize > 0 ? "××™×Ÿ ××¡×¤×™×§ ×ª×§×¦×™×‘ ×›×“×™ ×œ×©×œ× ×œ×¦×•×•×ª ×§×™×™× + ×œ×¦×¨×£ ×—×‘×¨ ×—×“×©." : "";

        }

        function addEvent(text, type = 'info') {
            const li = document.createElement('li');
            li.textContent = `×©× ×” ${year}: ${text}`;
            li.classList.add(`event-${type}`);
            eventList.prepend(li); // Add to the top
             // Apply animation class after adding to DOM
             requestAnimationFrame(() => {
                 li.style.animation = 'none';
                 void li.offsetWidth; // Trigger reflow
                 li.style.animation = `fadeSlideIn 0.5s ease forwards`;
             });
        }

        // Animation for budget change
        function animateBudgetChange(oldBudget, newBudget) {
            const budgetElement = document.getElementById('budget');
            budgetElement.textContent = newBudget.toLocaleString(); // Update text immediately
            const animationClass = newBudget > oldBudget ? 'flash-green' : 'flash-red';
            budgetElement.classList.remove('flash-green', 'flash-red'); // Remove existing
            requestAnimationFrame(() => { // Re-add after repaint
                 budgetElement.classList.add(animationClass);
                 // Remove class after animation
                 budgetElement.addEventListener('animationend', () => {
                     budgetElement.classList.remove(animationClass);
                 }, { once: true });
            });
        }

        // --- Game Logic Functions ---
        function applyForGrant(grantId) {
            if (gameEnded) return;
            if (decisionsMadeThisYear.grantApplied) {
                 addEvent(`×›×‘×¨ ×”×’×©×ª ×‘×§×©×ª ××™××•×Ÿ ×”×©× ×”.`, 'warning');
                 grantDecisionStatus.textContent = "×›×‘×¨ ×”×•×’×©×” ×‘×§×©×” ×”×©× ×”.";
                 return;
            }
            const grant = grants[grantId];
            if (budget >= grant.applyCost) {
                const oldBudget = budget;
                budget -= grant.applyCost;
                 animateBudgetChange(oldBudget, budget);
                pendingGrants.push({ id: grantId, potential: grant.award, chance: Math.min(1, grant.baseSuccessChance + reputation * reputationFactor), name: grant.name, repGain: grant.repGain });
                decisionsMadeThisYear.grantApplied = true;
                addEvent(`×™×¦××ª ×œ×¦×™×“ ××¢× ×§×™×: ×”×•×’×©×” ×‘×§×©×” ×œ-"${grant.name}". ×¢×œ×•×ª: $${grant.applyCost.toLocaleString()}. ×‘×”×¦×œ×—×”!`, 'info');
                updateDashboard();
            } else {
                addEvent(`××™×Ÿ ××¡×¤×™×§ ×ª×§×¦×™×‘ ×œ×”×’×©×ª ×‘×§×©×ª ××™××•×Ÿ "${grant.name}". ×¢×œ×•×ª: $${grant.applyCost.toLocaleString()}.`, 'warning');
                 grantDecisionStatus.textContent = `××™×Ÿ ××¡×¤×™×§ ×ª×§×¦×™×‘ ×œ×”×’×©×ª ×‘×§×©×” ×–×•. ×“×¨×•×©: $${grant.applyCost.toLocaleString()}.`;
            }
        }

        function hireResearcher(type) {
            if (gameEnded) return;
             const cost = researcherCosts[type];
             const rp = researcherResearchPoints[type];

             if (budget >= yearlyCost + cost) { // Check if next year's cost is affordable
                 teamSize++;
                 yearlyCost += cost;
                 // Research points contribution is calculated at year end
                 addEvent(`×¦×•×•×ª ××ª×¨×—×‘: ×¦×•×¨×¤/×” ${type === 'phd' ? '×“×•×§×˜×•×¨× ×˜/×™×ª' : '×¤×•×¡×˜-×“×•×§×˜×•×¨× ×˜/×™×ª'} ×œ×¦×•×•×ª. ×¢×œ×•×ª ×©× ×ª×™×ª × ×•×¡×¤×ª: $${cost.toLocaleString()}.`, 'info');
                 updateDashboard();
             } else {
                  addEvent(`××™×Ÿ ××¡×¤×™×§ ×ª×§×¦×™×‘ ×œ×’×™×™×¡ ${type === 'phd' ? '×“×•×§×˜×•×¨× ×˜/×™×ª' : '×¤×•×¡×˜-×“×•×§×˜×•×¨× ×˜/×™×ª'} ×‘×¢×œ×•×ª ×©× ×ª×™×ª ×©×œ $${cost.toLocaleString()}. ×•×“×/×™ ×©×™×© ××¡×¤×™×§ ×œ××©×›×•×¨×•×ª ×©×œ ×›×œ×œ ×”×¦×•×•×ª ×‘×©× ×” ×”×‘××”.`, 'warning');
             }
             // hiring doesn't block other actions, so no decisionsMadeThisYear.hireAttempted
        }

        function attemptPublish() {
            if (gameEnded) return;
            if (decisionsMadeThisYear.publishAttempted) {
                 addEvent(`×›×‘×¨ × ×™×¡×™×ª ×œ×¤×¨×¡× ××××¨ ×”×©× ×”. ×”××ª×Ÿ/×™ ×œ×ª×•×¦××•×ª.`, 'warning');
                 publishDecisionStatus.textContent = "×›×‘×¨ ×”×•×’×©×” ×‘×§×©×” ×”×©× ×”.";
                 return;
            }
            if (researchPoints >= publishResearchPointsRequired) {
                if (budget >= publishCost) {
                    const oldBudget = budget;
                    budget -= publishCost;
                     animateBudgetChange(oldBudget, budget);
                    researchPoints -= publishResearchPointsRequired;
                    pendingPublications.push({ cost: publishCost, baseChance: publishBaseSuccessChance, repGain: publishRepGain });
                     decisionsMadeThisYear.publishAttempted = true;
                    addEvent(`××¢×©×” ×©×œ ×™×“×¢: × ×™×¡×™×ª ×œ×¤×¨×¡× ××××¨. ×¢×œ×•×ª: $${publishCost.toLocaleString()}. ×”××ª×Ÿ/×™ ×œ×©×™×¤×•×˜ ×‘×©× ×” ×”×‘××”!`, 'info');
                    updateDashboard();
                } else {
                    addEvent(`××™×Ÿ ××¡×¤×™×§ ×ª×§×¦×™×‘ ×›×“×™ ×œ×××Ÿ ××ª ×ª×”×œ×™×š ×¤×¨×¡×•× ×”××××¨. ×¢×œ×•×ª: $${publishCost.toLocaleString()}.`, 'warning');
                     publishDecisionStatus.textContent = `××™×Ÿ ××¡×¤×™×§ ×ª×§×¦×™×‘. ×“×¨×•×©: $${publishCost.toLocaleString()}.`;
                }
            } else {
                addEvent(`××™×Ÿ ××¡×¤×™×§ × ×§×•×“×•×ª ×™×“×¢ ××“×¢×™ ×›×“×™ ×œ× ×¡×•×ª ×œ×¤×¨×¡× ××××¨. ×“×¨×•×©×•×ª ${publishResearchPointsRequired} × ×§×•×“×•×ª.`, 'warning');
                 publishDecisionStatus.textContent = `××™×Ÿ ××¡×¤×™×§ ×™×“×¢ ××“×¢×™. ×“×¨×•×©: ${publishResearchPointsRequired}.`;
            }
        }

        function advanceYear() {
            if (gameEnded) return;

            addEvent(`--- ×¡×™×•× ×©× ×” ${year}, ×œ×§×¨××ª ×©× ×” ${year + 1} ---`, 'info');

            // 1. Pay yearly costs (team salaries)
            const oldBudget = budget;
            budget -= yearlyCost;
            addEvent(`×©×•×œ× $${yearlyCost.toLocaleString()} ×¢×‘×•×¨ ××©×›×•×¨×•×ª ×”×¦×•×•×ª.`);
            animateBudgetChange(oldBudget, budget);


            // Check for game over condition (negative budget)
            if (budget < 0) {
                 addEvent(`××™×Ÿ ××¡×¤×™×§ ×ª×§×¦×™×‘! ×”×××–×Ÿ ×”×ª×§×¦×™×‘×™ ×©×œ×™×œ×™ ($${budget.toLocaleString()}). × ××œ×¦×ª ×œ×¡×’×•×¨ ××ª ×§×‘×•×¦×ª ×”××—×§×¨. ×”××©×—×§ ×”×¡×ª×™×™× ×‘×©× ×” ${year}.`, 'danger');
                 endGame(false); // Lost
                 return;
            }

            // 2. Process pending grants
            addEvent(`×‘×“×™×§×ª ×ª×•×¦××•×ª ×‘×§×©×•×ª ××™××•×Ÿ ×©×”×•×’×©×•...`);
            const resolvedGrants = [];
            pendingGrants.forEach(grant => {
                 const adjustedChance = Math.min(1, grant.baseSuccessChance + reputation * reputationFactor); // Re-calculate chance based on current reputation
                 const roll = Math.random();
                 // console.log(`Grant "${grant.name}": Base Chance ${grant.baseSuccessChance}, Rep: ${reputation}, Rep Factor: ${reputationFactor}, Adjusted Chance: ${adjustedChance.toFixed(2)}, Roll: ${roll.toFixed(2)}`);

                if (roll < adjustedChance) {
                    const oldBudget = budget;
                    budget += grant.potential;
                    reputation += grant.repGain; // Gain reputation from success
                    addEvent(`×¤×¨×™×¦×ª ×“×¨×š ××™××•× ×™×ª! ×‘×§×©×ª ×”××™××•×Ÿ "${grant.name}" ×”×ª×§×‘×œ×”! ×§×™×‘×œ×ª $${grant.potential.toLocaleString()} ××™××•×Ÿ ××—×§×¨. ×”××•× ×™×˜×™×Ÿ ×”××§×“××™ ×¢×œ×” ×‘-${grant.repGain} × ×§×•×“×•×ª.`, 'success');
                    animateBudgetChange(oldBudget, budget);

                } else {
                    // reputation = Math.max(0, reputation - Math.floor(grant.repGain / 4)); // Small rep loss on failure? Maybe too harsh. Let's just not gain.
                    addEvent(`×—×“×©×•×ª ×¤×—×•×ª ×˜×•×‘×•×ª: ×‘×§×©×ª ×”××™××•×Ÿ "${grant.name}" × ×“×—×ª×”. ×”××©×™×›×• ×œ×”×’×™×©!`, 'info');
                }
                resolvedGrants.push(grant); // Mark as resolved
            });
            pendingGrants = []; // Clear pending grants

            // 3. Process pending publications
             addEvent(`×‘×“×™×§×ª ×¡×˜×˜×•×¡ ××××¨×™× ×©×”×•×’×©×•...`);
            const resolvedPublications = [];
            pendingPublications.forEach(pub => {
                const adjustedChance = Math.min(1, pub.baseChance + reputation * reputationFactor * 1.5); // Publications might be more sensitive to rep?
                 const roll = Math.random();
                 // console.log(`Publication: Base Chance ${pub.baseChance}, Rep: ${reputation}, Rep Factor: ${reputationFactor}, Adjusted Chance: ${adjustedChance.toFixed(2)}, Roll: ${roll.toFixed(2)}`);

                 if (roll < adjustedChance) {
                     publications++;
                     reputation += pub.repGain; // Gain reputation from success
                     addEvent(`×”×›×¨×” ××§×“××™×ª! ×”××××¨ ×”×ª×§×‘×œ ×œ×¤×¨×¡×•×! ××–×œ ×˜×•×‘! ×”××•× ×™×˜×™×Ÿ ×”××§×“××™ ×¢×œ×” ×‘-${pub.repGain} × ×§×•×“×•×ª.`, 'success');
                 } else {
                     // reputation = Math.max(0, reputation - Math.floor(pub.repGain / 4)); // Small rep loss on failure?
                     addEvent(`× ×“×¨×©×™× ×ª×™×§×•× ×™× ××©××¢×•×ª×™×™×/×”××××¨ × ×“×—×”. ××œ ×™×™××•×©, × ×¡×”/×™ ×©×•×‘ ×œ××—×¨ ×©×™×¤×•×¨×™×!`, 'info');
                 }
                 resolvedPublications.push(pub); // Mark as resolved
            });
            pendingPublications = []; // Clear pending publications

            // 4. Generate new research points based on team size
            const pointsPerTeamMember = teamSize > 0 ? (teamSize * 10) + Math.floor(Math.random() * 5) : 0; // Base + small random
             // Optional: Add a small boost from reputation to RP generation?
            const reputationBonusRP = Math.floor(reputation / 5); // 1 RP for every 5 reputation points
            const pointsGained = pointsPerTeamMember + reputationBonusRP;

            researchPoints += pointsGained;
            if (teamSize > 0) {
                 addEvent(`×”×¦×•×•×ª ×¢×‘×“ ×‘××¨×¥! × ×•×¦×¨×• ${pointsGained} × ×§×•×“×•×ª ×™×“×¢ ××“×¢×™ (×›×•×œ×œ ×‘×•× ×•×¡ ××•× ×™×˜×™×Ÿ ×©×œ ${reputationBonusRP} × ×§×•×“×•×ª).`);
            } else {
                 addEvent(`××™×Ÿ ×—×‘×¨×™ ×¦×•×•×ª ×¤×¢×™×œ×™×. ×œ× × ×•×¦×¨×• × ×§×•×“×•×ª ×™×“×¢ ××“×¢×™ ×”×©× ×”.`);
            }

            // 5. Handle random events
             addEvent(`×‘×“×™×§×ª ××™×¨×•×¢×™× ××§×¨××™×™×...`);
            const randomEventRoll = Math.random(); // 0 to 1
            const eventChance = 0.1; // 10% chance of any significant random event
            const positiveEventChance = 0.5; // 50% of events are positive
            const negativeEventChance = 0.5; // 50% of events are negative

            if (randomEventRoll < eventChance) {
                 const eventTypeRoll = Math.random(); // Decide if positive or negative
                 if (eventTypeRoll < positiveEventChance) { // Positive Events
                     const positiveSpecificRoll = Math.random();
                     if (positiveSpecificRoll < 0.6) { // 60% of positive are budget bonus
                          const bonus = Math.floor(Math.random() * 60000) + 15000; // $15k - $75k
                          const oldBudget = budget;
                          budget += bonus;
                          addEvent(`××™×¨×•×¢ ××©××—! ×–×›×™×ª/×” ×‘×¤×¨×¡ ××—×§×¨ ×§×˜×Ÿ ×œ× ××ª×•×›× ×Ÿ! × ×•×¡×¤×• $${bonus.toLocaleString()} ×œ×××–×Ÿ.`, 'success');
                          animateBudgetChange(oldBudget, budget);
                     } else { // 40% of positive are RP/Rep bonus
                         const rpBonus = Math.floor(Math.random() * 60) + 20; // +20-80 RP
                         const repBonus = Math.floor(Math.random() * 10) + 5; // +5-15 Rep
                         researchPoints += rpBonus;
                         reputation += repBonus;
                         addEvent(`××™×¨×•×¢ ××©××—! ×¤×¨×™×¦×ª ×“×¨×š ××™× ×•×¨×™×ª ×¤× ×™××™×ª ×”×¢× ×™×§×” ${rpBonus} × ×§×•×“×•×ª ×™×“×¢ ××“×¢×™ ×•×¤×¨×¡×•× ×‘×‘×œ×•×’ ××“×¢×™ ×”×¢×œ×” ××ª ×”××•× ×™×˜×™×Ÿ ×‘-${repBonus} × ×§×•×“×•×ª.`, 'success');
                     }
                 } else { // Negative Events
                      const negativeSpecificRoll = Math.random();
                      if (negativeSpecificRoll < 0.5) { // 50% of negative are unexpected costs
                          const cost = Math.floor(Math.random() * 40000) + 10000; // $10k - $50k
                           const oldBudget = budget;
                          budget -= cost;
                           addEvent(`××™×¨×•×¢ ××¦×¢×¨: ×”×•×¦××” ×‘×œ×ª×™ ××ª×•×›× × ×ª (×ª×™×§×•×Ÿ ×¦×™×•×“/×§× ×¡ ××“××™× ×™×¡×˜×¨×˜×™×‘×™) ×‘×¡×š $${cost.toLocaleString()}.`, 'danger');
                           animateBudgetChange(oldBudget, budget);

                            // Check game over again after unexpected cost
                            if (budget < 0) {
                                addEvent(`××™×Ÿ ××¡×¤×™×§ ×ª×§×¦×™×‘! ×”×××–×Ÿ ×”×ª×§×¦×™×‘×™ ×©×œ×™×œ×™ ($${budget.toLocaleString()}). × ××œ×¦×ª ×œ×¡×’×•×¨ ××ª ×§×‘×•×¦×ª ×”××—×§×¨. ×”××©×—×§ ×”×¡×ª×™×™× ×‘×©× ×” ${year}.`, 'danger');
                                endGame(false); // Lost
                                return;
                           }

                      } else { // 50% of negative are researcher leaving
                           if (teamSize > 0) {
                                // Which researcher leaves? For simplicity, just reduce team size and cost by an average amount
                                const costReduction = yearlyCost / teamSize;
                                teamSize--;
                                yearlyCost -= costReduction;
                                // Maybe a small reputation hit? Or RP loss? Let's just add event.
                                addEvent(`××™×¨×•×¢ ××¦×¢×¨: ×—×‘×¨/×ª ×¦×•×•×ª ××¤×ª×—/×ª ×¢×–×‘/×” ×‘××¤×ª×™×¢. ××¡×¤×¨ ×—×‘×¨×™ ×”×¦×•×•×ª ×™×¨×“. ×¢×œ×•×ª ×©× ×ª×™×ª ×¤×—×ª×” ×‘-$${costReduction.toLocaleString()}.`, 'danger');
                           } else {
                                // If no team members, turn negative event into a minor cost or delay
                                const cost = Math.floor(Math.random() * 10000) + 2000;
                                 const oldBudget = budget;
                                budget -= cost;
                                 addEvent(`××™×¨×•×¢ ××¦×¢×¨: ×¢×™×›×•×‘ ××“××™× ×™×¡×˜×¨×˜×™×‘×™ ×’×¨× ×œ×”×•×¦××” ×§×˜× ×” ×‘×¡×š $${cost.toLocaleString()}.`, 'danger');
                                animateBudgetChange(oldBudget, budget);
                           }
                      }
                 }
            } else {
                 // addEvent(`×”×©× ×” ×¢×‘×¨×” ×œ×œ× ××™×¨×•×¢×™× ××§×¨××™×™× ××™×•×—×“×™×.`); // Too chatty, remove for now
            }


            // 6. Reset decisions for the new year
            decisionsMadeThisYear = {
                grantApplied: false,
                publishAttempted: false
            };

            // 7. Check for Win Condition
            if (year >= winConditionYears || (publications >= winConditionPublications && budget >= winConditionBudget)) {
                 addEvent(`--- ×¡×™×•× ×”××©×—×§ ---`, 'info');
                 let winReason = `×¢×‘×¨×• ${year} ×©× ×™× ×©×œ × ×™×”×•×œ ×§×‘×•×¦×ª ××—×§×¨ ×‘×”×¦×œ×—×”!`;
                 if (publications >= winConditionPublications && budget >= winConditionBudget) {
                     winReason = `×”×’×¢×ª ×œ×”×™×©×’ ××¨×©×™×: ${publications} ×¤×¨×¡×•××™× ×•-$${budget.toLocaleString()} ×ª×§×¦×™×‘!`;
                 }
                 addEvent(`×‘×¨×›×•×ª! ×”×¦×œ×—×ª ×‘××¡×¢ ×œ×¤×¨×•×¤×¡×•×¨×”! ${winReason}`, 'success');
                 endGame(true);
                 return;
            }


            // 8. Advance year counter and update dashboard
            year++;
            updateDashboard();
        }

        function endGame(isWin) {
            gameEnded = true;
            nextYearButton.disabled = true;
            grantButtons.forEach(btn => btn.disabled = true);
            hireButtons.forEach(btn => btn.disabled = true);
            publishButton.disabled = true;
             academiaGameAppDiv.classList.add(isWin ? 'game-win' : 'game-over');
        }


        // --- Event Listeners ---
        grantButtons.forEach(button => {
            button.addEventListener('click', () => {
                const grantId = button.dataset.grantId;
                applyForGrant(parseInt(grantId));
            });
        });

        hireButtons.forEach(button => {
            button.addEventListener('click', () => {
                const type = button.dataset.researcherType;
                hireResearcher(type);
            });
        });

        publishButton.addEventListener('click', attemptPublish);

        nextYearButton.addEventListener('click', advanceYear);

        explanationToggleBtn.addEventListener('click', () => {
            const isHidden = explanationDiv.style.display === 'none' || explanationDiv.style.display === '';
            explanationDiv.style.display = isHidden ? 'block' : 'none';
            explanationToggleBtn.textContent = isHidden ? '×”×¡×ª×¨: ××“×¨×™×š ×œ××¡×¢ ×”××§×“××™' : '×”×¦×’/×”×¡×ª×¨: ××“×¨×™×š ×œ××¡×¢ ×”××§×“××™';
             explanationToggleBtn.classList.toggle('active', !isHidden);
        });


        // --- Initial Setup ---
        updateDashboard(); // Set initial dashboard state
         addEvent("×‘×”×¦×œ×—×” ×‘××¡×¢ ×œ×‘×™×¡×•×¡ ×§×‘×•×¦×ª ×”××—×§×¨ ×•×”×”×’×¢×” ×œ×¤×¡×’×ª ×”××§×“××™×”!", 'info');
         addEvent("×”××©×—×§ ××ª×—×™×œ ×‘×ª×§×¦×™×‘ ×”×ª×—×œ×ª×™ ×©×œ $100,000.");
    });
</script>
```