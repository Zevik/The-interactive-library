---
title: "מסע בזמן: איך לטינית הפכה לספרדית, צרפתית ועוד?"
english_slug: journey-through-time-how-latin-became-romance-languages
category: "מדעי הרוח / בלשנות"
tags:
  - בלשנות היסטורית
  - שפות רומאניות
  - לטינית
  - התפתחות שפות
  - פילולוגיה
---
# מסע בזמן: צפו בלידתן של השפות הרומאניות

האם ידעתם שלטינית, השפה של הקיסרים והמשוררים הגדולים, לא באמת 'מתה'? היא פשוט התפתחה! היא חיה ונושמת במיליוני דוברים ברחבי העולם, רק בצורות מפתיעות ושונות לחלוטין. איך הפכה השפה שהדהדה בפורום הרומי לספרדית, צרפתית, איטלקית, פורטוגזית ועוד? צאו איתנו למסע ויזואלי מרתק בזמן כדי לצפות בתהליך הפלאי הזה!

<div class="language-simulation-container">
    <h2>סימולטור התפתחות השפות הרומאניות</h2>
    <p class="simulation-instructions">לחצו על הכפתור כדי להתחיל את המסע ההיסטורי או להתקדם לשלב הבא ולהבין את השינויים המרכזיים.</p>
    <div class="simulation-area">
        <div class="timeline">
            <div class="timeline-event" data-year="100 BCE" style="left: 5%;">לטינית וולגרית</div>
            <div class="timeline-event" data-year="476 CE" style="left: 30%;">קריסת האימפריה</div>
            <div class="timeline-event" data-year="800 CE" style="left: 55%;">בידוד והתפצלות</div>
            <div class="timeline-event" data-year="1500 CE" style="left: 80%;">שפות מודרניות מוקדמות</div>
            <div class="timeline-event" data-year="היום" style="left: 95%;">שפות רומאניות מודרניות</div>
        </div>
        <div id="languageTree" class="language-tree">
            <!-- Simulation content will be rendered here by JavaScript -->
        </div>
         <div id="completionMessage" class="completion-message" style="display: none;">
             <h3>✨ המסע הושלם! ✨</h3>
             <p>ראיתם כיצד הלטינית המדוברת התפצלה לשפות המוכרות לנו היום. כל שפה היא עולם ומלואו של היסטוריה ושינוי לשוני!</p>
         </div>
    </div>
    <button id="nextStageBtn">התחל מסע</button>
    <div id="resetBtnContainer" style="display: none;"><button id="resetBtn">התחל מחדש</button></div>

    <div id="explanationNotes" class="explanation-notes" style="display: none;">
        <h3>על השלב הנוכחי:</h3>
        <ul id="notesList">
            <!-- Notes will be added here by JavaScript -->
        </ul>
    </div>
</div>

<button id="toggleExplanationBtn" class="toggle-explanation-btn">הצג הסבר מפורט</button>

<div id="detailedExplanation" style="display: none;">
    <h2>הסבר מפורט: מסע בזמן של הלטינית</h2>
    <p>המסע של הלטינית מרומא העתיקה ועד לשפות הרומאניות המודרניות הוא דוגמה מרתקת לתהליכים של שינוי והתפצלות לשונית לאורך ההיסטוריה. בואו נצלול לעומק.</p>

    <h3>מהי לטינית וולגרית וכיצד היא שונה מהלטינית הקלאסית?</h3>
    <p>בעוד <strong>לטינית קלאסית</strong> הייתה השפה המלוטשת והמתוקננת של הספרות והרטוריקה הרומית (כפי שמוצאים אצל קיקרו, ורגיליוס ואחרים), <strong>לטינית וולגרית</strong> (בלטינית: <em>sermo vulgaris</em>, "דיבור נפוץ") הייתה השפה המדוברת היומיומית. זו הייתה שפת החיילים, הסוחרים, המתיישבים, והאזרח הפשוט. היא התאפיינה בווריאציות אזוריות ניכרות, אוצר מילים פשוט יותר או חדשני, ופישוט משמעותי במורפולוגיה (בעיקר ביחסות) ובתחביר. היא למעשה הייתה זרע שממנו צמחו כל השפות הרומאניות.</p>

    <h3>גורמים מרכזיים לפיצול: למה השפות התפצלו?</h3>
    <ul>
        <li><strong>התמוטטות האימפריה הרומית המערבית (476 לספירה):</strong> קריסת המבנה הפוליטי המרכזי פירקה את האחידות השלטונית, התרבותית והלשונית. הפרובינציות הפכו לממלכות נפרדות, עם קשר מינימלי למרכז או זו לזו.</li>
        <li><strong>בידוד גיאוגרפי:</strong> מרחקים עצומים, דרכי תקשורת לא בטוחות וגבולות פוליטיים חדשים יצרו בידוד בין האזורים השונים. הדיאלקטים הלטיניים המקומיים התפתחו מעתה באופן עצמאי, ללא ההשפעה המאחדת של רומא.</li>
        <li><strong>השפעות שפות המצע (Substratum):</strong> באזורים שונים, דוברי הלטינית באו במגע עם אוכלוסיות שדיברו שפות מקומיות לפני הכיבוש הרומי (כמו קלטית בגאליה, איברית/בסקית בהיספניה). כשהאוכלוסיות הללו עברו ללטינית, הן הכניסו אליה הרגלים לשוניים, צלילים ואוצר מילים משפות המצע שלהן, מה שהשפיע על האופן שבו הלטינית נאמרה והתפתחה באותו מקום.</li>
        <li><strong>השפעות שפות על (Superstratum):</strong> פלישות שבטים גרמאניים (ויזיגותים, פרנקים, לומברדים) הביאו להשפעות לשוניות (בעיקר באוצר מילים ובהגייה) על הדיאלקטים הלטיניים באזורים שנכבשו על ידם. השפות הגרמאניות היו שפות ה'על' שהשפיעו על הלטינית המדוברת, למרות שדובריהן אימצו לבסוף את הלטינית עצמה.</li>
        <li><strong>היעדר תקן לשוני מרכזי:</strong> ללא שלטון רומי חזק שיאכוף אחידות לשונית, השינויים הטבעיים שמתרחשים בכל שפה לא עוכבו והתרחשו באופן שונה בכל אזור, מה שהגביר את ההבדלים.</li>
    </ul>

    <h3>אילו שינויים לשוניים דרמטיים התרחשו?</h3>
    <p>המעבר מלטינית וולגרית לשפות רומאניות היה כרוך במהפכה לשונית בכל הרבדים:</p>
    <ul>
        <li><strong>שינויים פונולוגיים (צלילים והגייה):</strong>
            <ul>
                <li><strong>איחוד תנועות:</strong> הבחנות בין תנועות קצרות וארוכות בלטינית נעלמו.</li>
                <li><strong>דיפתונגיזציה:</strong> תנועות בודדות החלו להישמע כצירופי תנועות (דיפתונגים) בתנאים מסוימים (למשל, ה-e הפתוחה במילה כמו <em>pes</em> - רגל, שהפכה ל-<em>pied</em> בצרפתית, <em>piede</em> באיטלקית, ו-<em>pie</em> בספרדית).</li>
                <li><strong>שינויים בעיצורים:</strong> תהליכים כמו המעבר מ-ct ל-it (<em>lacte</em> -> <em>latte</em> באיטלקית, <em>leche</em> בספרדית), מ-gn ל-ñ או nh (<em>lignum</em> -> <em>leño</em> בספרדית, <em>lenho</em> בפורטוגזית), ואפילו היעלמות מוחלטת של העיצור F בתחילת מילה בספרדית (<em>facere</em> -> <em>hacer</em>).</li>
                <li><strong>אובדן והוספת צלילים:</strong> היעלמות ה-h האילמת בתחילת מילה, והוספת תנועת עזר (e) לפני צירוף s+עיצור בתחילת מילה בחלק מהשפות (<em>schola</em> -> <em>escuela</em> בספרדית).</li>
            </ul>
        </li>
        <li><strong>שינויים מורפולוגיים (צורות מילים):</strong>
            <ul>
                <li><strong>אובדן מערכת היחסות:</strong> זהו אולי השינוי הגדול ביותר. הלטינית ביטאה את התפקיד התחבירי של שם עצם (נושא, מושא, שייכות) באמצעות שינוי הסיומת של המילה (דקלנציה). בשפות הרומאניות המערביות (איטלקית, צרפתית, ספרדית, פורטוגזית ועוד), מערכת זו נעלמה כמעט לגמרי, והתפקיד מסומן כעת בעיקר באמצעות <strong>מילות יחס</strong> ו<strong>סדר מילים</strong> קבוע יותר. רומנית שימרה חלקית מערכת זו.</li>
                <li><strong>פישוט והיווצרות זמנים חדשים:</strong> מערכת הפעלים עברה גם היא פישוט מסוים, יחד עם היווצרות זמנים מורכבים חדשים (למשל, העתיד והעבר המורכב באמצעות פועלי עזר כמו habere - 'יש').</li>
            </ul>
        </li>
        <li><strong>שינויים תחביריים (מבנה משפט):</strong>
            <ul>
                <li>מעבר מסדר מילים גמיש (אפשרי בלטינית בזכות היחסות) לסדר מילים קבוע יותר (נושא-פועל-מושא SVO) ברובן.</li>
                <li>שימוש מוגבר במילות יחס כמחליפות ליחסות.</li>
            </ul>
        </li>
        <li><strong>שינויים לקסיקליים (אוצר מילים):</strong>
            <ul>
                <li>מילים שינו את משמעותן.</li>
                <li>מילים רבות נעלמו והוחלפו במילים אחרות מהלטינית הוולגרית, או שאולות משפות המצע והעל.</li>
                <li>נוצרו מילים חדשות לגמרי.</li>
            </ul>
        </li>
    </ul>

    <h3>משפחת השפות הרומאניות: סקירה קצרה</h3>
    <p>כיום ישנן שפות רומאניות רבות, אך העיקריות שבהן כוללות:</p>
    <ul>
        <li><strong>איטלקית:</strong> התפתחה מניבי טוסקנה המרכזיים. לעיתים קרובה יותר ללטינית מבחינות מסוימות (כמו שמירת ניגודי אורך עיצורים).</li>
        <li><strong>צרפתית:</strong> עברה שינויים פונולוגיים דרמטיים ופישוט מורפולוגי נרחב. הושפעה עמוקות מהשפות הקלטיות (גאליות) והגרמאניות (פרנקיות).</li>
        <li><strong>ספרדית (קסטיליאנית):</strong> הושפעה משפות המצע האיבריות/בסקית ומהשפעות ערביות משמעותיות (בעיקר באוצר מילים) וגרמאניות (ויזיגותיות). שינוי F->H האופייני.</li>
        <li><strong>פורטוגזית:</strong> קרובה לספרדית אך עם התפתחות פונולוגית ייחודית (תנועות אפיות, היעלמות l/n בין תנועות). הושפעה גם היא מהשפעות גרמאניות וערביות.</li>
        <li><strong>רומנית:</strong> התפתחה באזור גאוגרפי מרוחק יחסית (דאקיה/רומניה). שימרה חלקית את מערכת היחסות והושפעה רבות משפות סלאביות, יוונית ואלבנית.</li>
        <li><strong>קטלאנית:</strong> מדוברת בצפון מזרח ספרד ובסביבתה. נחשבת שפת מעבר בין קבוצות איבריות וגאלו-רומאניות.</li>
        <li><strong>אוקסיטנית (פרובנסלית):</strong> קבוצת ניבים בדרום צרפת, קרובה לקטלאנית ולצרפתית.</li>
        <li><strong>סרדית:</strong> מדוברת באי סרדיניה. נחשבת לשפה הרומאנית ששימרה היבטים ארכאיים מסוימים מהלטינית.</li>
    </ul>

    <h3>דוגמאות קטנות לשינויים (כיף לראות!)</h3>
    <p>השוואת מילים מראה את המוצא המשותף והמסלולים הנפרדים:</p>
    <ul>
        <li><strong>לילה</strong>: לטינית (nox, noctis) -> איטלקית (notte) -> צרפתית (nuit) -> ספרדית (noche) -> פורטוגזית (noite) -> רומנית (noapte)</li>
        <li><strong>מים</strong>: לטינית (aqua) -> איטלקית (acqua) -> צרפתית (eau) -> ספרדית (agua) -> פורטוגזית (água) -> רומנית (apă)</li>
        <li><strong>שלוש</strong>: לטינית (tres) -> איטלקית (tre) -> צרפתית (trois) -> ספרדית (tres) -> פורטוגזית (três) -> רומנית (trei)</li>
        <li><strong>לדבר</strong>: לטינית (loqui) -> איטלקית (parlare - מלטינית parabola) -> צרפתית (parler) -> ספרדית (hablar - מלטינית fabulari, עבר שינוי F->H) -> פורטוגזית (falar) -> רומנית (vorbi - ממקור סלאבי, מראה השפעת סופרסטרטום משמעותית כאן)</li>
    </ul>

    <h3>עץ השפות: מפה של היסטוריה</h3>
    <p>עץ שפות הוא כמו עץ משפחה לשפות. הוא מראה איך שפות 'בנות' (כמו ספרדית או צרפתית) צומחות משפת 'אם' קדומה (כמו לטינית וולגרית). הסימולטור מציג גרסה פשוטה של עץ כזה, שממחישה את תהליך ההתפצלות ההיסטורית ככל שהשפות התרחקו גיאוגרפית וספגו השפעות שונות, עד שהפכו לשפות נפרדות שאינן מובנות עוד זו לזו באופן הדדי (למעט יוצאי דופן קרובים).</p>
</div>

<script>
    const stages = [
        {
            languages: [{ name: 'לטינית וולגרית', slug: 'vulgar-latin' }],
            notes: ['הבסיס לכל השפות הרומאניות.', 'שפת היומיום המדוברת בכל רחבי האימפריה הרומית.', 'קיימות כבר וריאציות אזוריות, אך הבנה הדדית מלאה.'],
            year: '100 לפנה"ס - 300 לספירה'
        },
        {
            event: 'קריסת האימפריה הרומית המערבית ובידוד גיאוגרפי',
            languages: [
                { name: 'דיאלקטים איטלקיים', slug: 'italic-dialects', parent: 'vulgar-latin' },
                { name: 'דיאלקטים גאלו-רומאניים', slug: 'gallo-roman-dialects', parent: 'vulgar-latin' },
                { name: 'דיאלקטים איבריים', slug: 'iberian-dialects', parent: 'vulgar-latin' },
                { name: 'דיאלקטים באלקניים', slug: 'balkan-dialects', parent: 'vulgar-latin' }
            ],
            notes: [
                'הקשר בין אזורים נחלש דרמטית.',
                'כל אזור מתחיל לפתח את הדיאלקט הלטיני שלו בכיוון שונה.',
                'השפעות של שפות מקומיות (Substratum) מתחילות לעצב את ההתפתחות.',
                'פלישות גרמאניות מביאות השפעות נוספות (Superstratum).'
            ],
            year: '400 - 600 לספירה'
        },
        {
            event: 'התפצלות משמעותית ושינויים לשוניים דרמטיים',
            languages: [
                { name: 'פרוטו-איטלקית', slug: 'proto-italian', parent: 'italic-dialects' },
                { name: 'פרוטו-צרפתית', slug: 'proto-french', parent: 'gallo-roman-dialects' },
                { name: 'פרוטו-אוקסיטנית', slug: 'proto-occitan', parent: 'gallo-roman-dialects' },
                { name: 'פרוטו-ספרדית', slug: 'proto-spanish', parent: 'iberian-dialects' },
                { name: 'פרוטו-פורטוגזית', slug: 'proto-portuguese', parent: 'iberian-dialects' },
                { name: 'פרוטו-קטלאנית', slug: 'proto-catalan', parent: 'iberian-dialects' }, // Simplified
                { name: 'פרוטו-רומנית', slug: 'proto-romanian', parent: 'balkan-dialects' }
            ],
            notes: [
                '<strong>קריסת היחסות:</strong> מערכת הדקלנציה הלטינית כמעט נעלמת.',
                '<strong>שינויי צלילים:</strong> תנועות ועיצורים רבים משתנים באופן שונה בכל אזור (למשל, F->H באיברית).',
                '<strong>אוצר מילים:</strong> קליטת מילים משפות המצע והעל.',
                'הבדלים תחביריים גדלים. השפות כבר נשמעות שונה מאוד.'
            ],
            year: '700 - 1000 לספירה'
        },
         {
            event: 'התמסדות ניבים מרכזיים והופעת טקסטים כתובים',
            languages: [
                { name: 'איטלקית קדומה', slug: 'early-italian', parent: 'proto-italian' },
                { name: 'צרפתית קדומה', slug: 'old-french', parent: 'proto-french' },
                { name: 'אוקסיטנית קדומה', slug: 'old-occitan', parent: 'proto-occitan' },
                { name: 'ספרדית קדומה', slug: 'old-spanish', parent: 'proto-spanish' },
                { name: 'פורטוגזית קדומה', slug: 'old-portuguese', parent: 'proto-portuguese' },
                 { name: 'קטלאנית קדומה', slug: 'old-catalan', parent: 'proto-catalan' },
                { name: 'רומנית קדומה', slug: 'early-romanian', parent: 'proto-romanian' }
            ],
            notes: [
                'ניבים מסוימים (טוסקנה, איל-דה-פראנס, קסטיליה) צוברים יוקרה והופכים לבסיס לשפות הלאומיות העתידיות.',
                'מופיעים המסמכים והיצירות הספרותיות הראשונות בשפות החדשות.',
                'ההבדלים כבר כה משמעותיים שהבנה הדדית קשה, למעט בין שפות קרובות מאוד גיאוגרפית.'
            ],
            year: '1100 - 1400 לספירה'
        },
         {
            event: 'עידן הדפוס והקולוניאליזם: גיבוש והפצה עולמית',
            languages: [
                { name: 'איטלקית מודרנית', slug: 'modern-italian', parent: 'early-italian' },
                { name: 'צרפתית מודרנית', slug: 'modern-french', parent: 'old-french' },
                { name: 'אוקסיטנית (שפה עצמאית)', slug: 'occitan', parent: 'old-occitan' }, // Still exists, less prominent
                { name: 'ספרדית מודרנית', slug: 'modern-spanish', parent: 'old-spanish' },
                { name: 'פורטוגזית מודרנית', slug: 'modern-portuguese', parent: 'old-portuguese' },
                 { name: 'קטלאנית מודרנית', slug: 'modern-catalan', parent: 'old-catalan' },
                { name: 'רומנית מודרנית', slug: 'modern-romanian', parent: 'early-romanian' }
            ],
            notes: [
                'הדפוס מאפשר סטנדרטיזציה נרחבת של האיות והדקדוק.',
                'מעצמות קולוניאליות מפיצות את ספרדית, פורטוגזית וצרפתית ברחבי העולם.',
                'השינויים הלשוניים נמשכים, אך בקצב איטי יותר.',
                'השפות הרומאניות המודרניות מבוססות היטב ומובחנות בבירור.'
            ],
            year: '1500 לספירה - היום'
        }
    ];

    let currentStageIndex = 0;
    const simulationArea = document.querySelector('.simulation-area'); // Use class selector
    const languageTree = document.getElementById('languageTree');
    const nextStageBtn = document.getElementById('nextStageBtn');
    const resetBtn = document.getElementById('resetBtn');
    const resetBtnContainer = document.getElementById('resetBtnContainer');
    const explanationNotesDiv = document.getElementById('explanationNotes');
    const notesList = document.getElementById('notesList');
    const timelineEvents = document.querySelectorAll('.timeline-event');
    const completionMessageDiv = document.getElementById('completionMessage');

     function renderStage() {
         const stageData = stages[currentStageIndex];
         const stageDivId = `stage-${currentStageIndex}`;
         let stageDiv = document.getElementById(stageDivId);

         if (!stageDiv) {
             stageDiv = document.createElement('div');
             stageDiv.id = stageDivId;
             stageDiv.classList.add('language-stage');
             languageTree.appendChild(stageDiv);

             // Hide previous stages except the direct parent stage
             languageTree.querySelectorAll('.language-stage').forEach((stage, index) => {
                  if (index !== currentStageIndex) { // Hide future stages
                      stage.style.display = 'none';
                  }
             });
         }

         // Clear existing nodes in the current stage div before adding new ones
         stageDiv.innerHTML = '';

         // Position the stage div horizontally - using flexbox in CSS for language-tree children
         // The flexbox handles distribution.


         // Add notes for the stage with fade-in
         notesList.innerHTML = '';
         if (stageData.event) {
              const eventTitle = document.createElement('li');
              eventTitle.innerHTML = `<strong>אירוע:</strong> ${stageData.event} <em>(${stageData.year})</em>`;
              notesList.appendChild(eventTitle);
         } else {
              const yearNote = document.createElement('li');
              yearNote.innerHTML = `<em>(${stageData.year})</em>`;
              notesList.appendChild(yearNote);
         }
         stageData.notes.forEach(note => {
             const li = document.createElement('li');
             li.innerHTML = note;
             notesList.appendChild(li);
         });
         explanationNotesDiv.style.display = 'block';
          explanationNotesDiv.classList.remove('fade-in'); // Reset animation
          void explanationNotesDiv.offsetWidth; // Trigger reflow
          explanationNotesDiv.classList.add('fade-in'); // Add animation class


         // Render languages for the stage inside the stageDiv
         stageData.languages.forEach((lang, index) => {
             const langNode = document.createElement('div');
             langNode.classList.add('language-node', lang.slug);
             langNode.dataset.stage = currentStageIndex;
             langNode.dataset.slug = lang.slug;
             langNode.dataset.parent = lang.parent; // Store parent for line drawing

             const langLabel = document.createElement('div');
             langLabel.classList.add('language-label');
             langLabel.textContent = lang.name;
             langNode.appendChild(langLabel);

             // Add simple notes within the node for the very first stage
              if (currentStageIndex === 0) {
                  const langNotes = document.createElement('div');
                  langNotes.classList.add('linguistic-notes');
                  langNotes.textContent = 'המקור המשותף';
                  langNode.appendChild(langNotes);
              }

             stageDiv.appendChild(langNode);

              // Add appearance animation class with delay
              setTimeout(() => {
                  langNode.classList.add('node-appearing');
              }, index * 100); // Stagger animation
         });

         // Show the current stage div with a fade-in effect
         stageDiv.style.display = 'flex';
          stageDiv.classList.remove('fade-in'); // Reset animation
          void stageDiv.offsetWidth; // Trigger reflow
          stageDiv.classList.add('fade-in');


         // Update timeline indicator
          timelineEvents.forEach(eventDiv => {
              const eventYear = parseInt(eventDiv.dataset.year.replace(' לפנה"ס', '-').replace(' לספירה', '').replace('היום', new Date().getFullYear()));
              const stageYearStr = stageData.year.split(' - ')[0].replace(' לפנה"ס', '-').replace(' לספירה', '');
              const stageYear = parseInt(stageYearStr.replace('היום', new Date().getFullYear()));

              const adjustedStageYear = stageYearStr.includes('-') ? -Math.abs(stageYear) : stageYear; // Handle BCE as negative
              const adjustedEventYear = eventDiv.dataset.year.includes('לפנה"ס') ? -Math.abs(eventYear) : eventYear;

               if (adjustedStageYear >= adjustedEventYear || stageData.year.includes('היום')) {
                   eventDiv.classList.add('passed');
               } else {
                   eventDiv.classList.remove('passed');
               }
          });


         // Manage button visibility and completion message
         completionMessageDiv.style.display = 'none'; // Hide message by default
         if (currentStageIndex < stages.length - 1) {
             nextStageBtn.textContent = 'המשך מסע לשלב הבא';
             nextStageBtn.style.display = 'block';
              resetBtnContainer.style.display = 'none';
         } else {
             nextStageBtn.style.display = 'none';
              resetBtnContainer.style.display = 'block';
              completionMessageDiv.style.display = 'block'; // Show completion message
              completionMessageDiv.classList.remove('fade-in'); // Reset animation
              void completionMessageDiv.offsetWidth; // Trigger reflow
              completionMessageDiv.classList.add('fade-in'); // Add animation class
         }

         // Draw connecting lines (simplified)
         // Draw lines after a slight delay to allow nodes to appear and position
         setTimeout(drawLines, 200); // Increased delay slightly
     }

     function drawLines() {
         // Remove old lines and SVG canvas
         languageTree.querySelectorAll('.language-line').forEach(line => line.remove());
         languageTree.querySelector('svg.language-line-canvas')?.remove();


         if (currentStageIndex === 0) return; // No lines needed for the first stage

         // Create a new SVG element for lines
         let svgCanvas = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
         svgCanvas.classList.add('language-line-canvas');
          svgCanvas.style.position = 'absolute';
          svgCanvas.style.top = '0';
          svgCanvas.style.left = '0';
          svgCanvas.style.width = '100%';
          svgCanvas.style.height = '100%';
          svgCanvas.style.pointerEvents = 'none'; // Don't block clicks
          svgCanvas.style.overflow = 'visible'; // Important for lines going outside bounds
         languageTree.appendChild(svgCanvas);

         // Draw lines from nodes in stage N-1 to nodes in stage N
         const prevStageNodes = languageTree.querySelectorAll(`.language-stage#stage-${currentStageIndex - 1} .language-node`);
         const currentStageNodes = languageTree.querySelectorAll(`.language-stage#stage-${currentStageIndex} .language-node`);

         const treeRect = languageTree.getBoundingClientRect(); // Get bounding rect of the tree container

         currentStageNodes.forEach(childNode => {
             const parentSlug = childNode.dataset.parent;
             if (parentSlug) {
                 const parentNode = Array.from(prevStageNodes).find(node => node.dataset.slug === parentSlug);
                 if (parentNode) {
                     // Calculate positions relative to the languageTree container's top-left corner
                     const parentRect = parentNode.getBoundingClientRect();
                     const childRect = childNode.getBoundingClientRect();

                     const x1 = parentRect.left + parentRect.width / 2 - treeRect.left; // Use center for connection point
                     const y1 = parentRect.bottom - treeRect.top; // Connect from bottom of parent
                     const x2 = childRect.left + childRect.width / 2 - treeRect.left; // Use center for connection point
                     const y2 = childRect.top - treeRect.top; // Connect to top of child

                     const svgLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                      svgLine.setAttribute('x1', x1);
                      svgLine.setAttribute('y1', y1);
                      svgLine.setAttribute('x2', x2);
                      svgLine.setAttribute('y2', y2);
                      svgLine.setAttribute('stroke', 'rgba(0, 0, 0, 0.3)'); // Use a neutral color
                      svgLine.setAttribute('stroke-width', '2');
                      svgLine.classList.add('language-line'); // Add class for styling/animation

                     svgCanvas.appendChild(svgLine);

                      // Add animation to the line after it's added to the DOM
                       // This is a simplified line animation (fade in with nodes)
                       // More complex drawing animation requires calculating stroke-dashoffset
                       svgLine.style.opacity = 0; // Start hidden
                       setTimeout(() => {
                           svgLine.style.transition = 'opacity 0.5s ease-out';
                           svgLine.style.opacity = 1;
                       }, 250); // Delay slightly after nodes appear
                 }
             }
         });
     }

     function resetSimulation() {
         currentStageIndex = 0;
         languageTree.innerHTML = ''; // Clear all stages and the SVG canvas
         timelineEvents.forEach(eventDiv => eventDiv.classList.remove('passed'));
          completionMessageDiv.style.display = 'none'; // Hide completion message
         renderStage();
         nextStageBtn.textContent = 'התחל מסע';
         resetBtnContainer.style.display = 'none';
         explanationNotesDiv.style.display = 'none'; // Hide notes on reset
     }

     nextStageBtn.addEventListener('click', () => {
         if (currentStageIndex < stages.length - 1) {
             currentStageIndex++;
             renderStage();
         }
     });

     resetBtn.addEventListener('click', resetSimulation);

     // Initial render (only the first stage on load)
     renderStage();
     explanationNotesDiv.style.display = 'none'; // Hide notes until first click


     // Toggle detailed explanation
     const toggleExplanationBtn = document.getElementById('toggleExplanationBtn');
     const detailedExplanationDiv = document.getElementById('detailedExplanation');

     toggleExplanationBtn.addEventListener('click', () => {
         const isHidden = detailedExplanationDiv.style.display === 'none';
         if (isHidden) {
             detailedExplanationDiv.style.display = 'block';
             toggleExplanationBtn.textContent = 'הסתר הסבר מפורט';
              detailedExplanationDiv.classList.remove('fade-in'); // Reset animation
              void detailedExplanationDiv.offsetWidth; // Trigger reflow
              detailedExplanationDiv.classList.add('fade-in'); // Add animation class
         } else {
             // Optional: Add fade-out before hiding, requires JS animation or CSS transition
             detailedExplanationDiv.style.display = 'none';
             toggleExplanationBtn.textContent = 'הצג הסבר מפורט';
         }
     });


     // Redraw lines on window resize and potentially on stage change if layout shifts
      window.addEventListener('resize', () => {
           // Simply redraw lines. Flexbox handles node positions automatically.
           drawLines();
       });


</script>

<style>
    :root {
        --primary-color: #4682B4; /* Steelblue */
        --secondary-color: #D3D3D3; /* LightGrey */
        --background-light: #F8F8F8; /* Very light grey */
        --background-medium: #EFEFEF; /* Slightly darker grey */
        --border-color: #CCCCCC;
        --text-color: #333;
        --highlight-color: #FFD700; /* Gold, for highlight effect */
    }


    /* Global RTL and Font */
    body {
        direction: rtl;
        text-align: right;
        font-family: 'Arial', sans-serif; /* Keep Arial or consider system-ui */
        line-height: 1.6;
        color: var(--text-color);
        background-color: #f4f4f4;
        margin: 0;
        padding: 20px;
    }

    h1, h2, h3 {
        color: var(--primary-color);
        text-align: center; /* Center titles */
        margin-bottom: 15px;
    }

    p {
        text-align: right;
        margin-bottom: 1em;
    }

    /* Simulation Container */
    .language-simulation-container {
        max-width: 1000px;
        margin: 20px auto;
        padding: 30px; /* Increased padding */
        border: 1px solid var(--border-color);
        border-radius: 12px; /* More rounded corners */
        background-color: #FFFFFF; /* Clean white background */
        text-align: center;
        overflow: hidden;
        position: relative;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1); /* Softer shadow */
    }

    .simulation-instructions {
        font-size: 1.1em;
        color: #555;
        margin-bottom: 20px;
        text-align: center; /* Instructions centered */
    }

    .simulation-area {
        position: relative;
        width: 100%;
        height: 450px; /* Increased height for more space */
        border: 2px dashed var(--secondary-color); /* Thicker, softer dash */
        border-radius: 8px;
        margin-bottom: 25px; /* More space below sim */
        overflow: hidden;
        background: linear-gradient(to bottom, #e0f2f7, #b3e5fc); /* Subtle gradient background */
    }

     .timeline {
         position: absolute;
         top: 20px;
         left: 0;
         width: 100%;
         height: 30px;
         border-bottom: 2px solid var(--primary-color); /* Solid, colored line */
         display: flex;
         justify-content: space-between;
         padding: 0 5%;
         box-sizing: border-box;
         z-index: 3;
     }

     .timeline-event {
         position: absolute;
         bottom: -15px; /* Position further below the line */
         font-size: 0.9em; /* Slightly larger text */
         color: var(--text-color);
         white-space: nowrap;
         z-index: 3;
         transform: translateX(50%); /* Center based on the absolute position */
         /* transition: color 0.3s ease, font-weight 0.3s ease; /* Smooth transition */
     }

     .timeline-event::before {
         content: '';
         position: absolute;
         bottom: -8px; /* Position the dot on the line */
         left: 50%; /* Center relative to the text */
         transform: translateX(-50%); /* Adjust for centering the dot itself */
         width: 12px; /* Larger dot */
         height: 12px;
         background-color: var(--secondary-color); /* Default dot color */
         border-radius: 50%;
         border: 2px solid #fff; /* White border for visibility */
         box-sizing: border-box;
         z-index: 4; /* Ensure dot is above the line */
         /* transition: background-color 0.3s ease, border-color 0.3s ease; /* Smooth transition */
     }

      .timeline-event.passed {
           font-weight: bold;
           color: var(--primary-color); /* Highlight passed text */
      }
      .timeline-event.passed::before {
          background-color: var(--primary-color); /* Highlight passed dot */
          border-color: var(--primary-color);
      }


    .language-tree {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        justify-content: space-around;
        align-items: flex-start;
        padding-top: 80px; /* Space for timeline */
        box-sizing: border-box;
    }

    .language-stage {
        position: relative;
        display: flex;
        flex-direction: column;
        justify-content: space-around;
        align-items: center;
        width: 18%;
         height: calc(100% - 80px);
         box-sizing: border-box;
         opacity: 0; /* Start hidden for animation */
         transition: opacity 0.8s ease-out; /* Fade in stage */
    }

     .language-stage.fade-in {
         opacity: 1;
     }


    .language-node {
        background-color: #FFFFFF; /* White background for nodes */
        border: 1px solid var(--primary-color);
        border-radius: 8px; /* Softer corners */
        padding: 10px 15px; /* More padding */
        margin: 8px 0; /* Margin between nodes */
        text-align: center;
        font-size: 1em; /* Slightly larger font */
        cursor: pointer; /* Indicate interactivity */
        z-index: 2;
        position: relative;
        box-shadow: 3px 3px 8px rgba(0,0,0,0.15); /* More prominent shadow */
        width: fit-content;
        max-width: 150px; /* Increased max width */
        min-width: 100px;
        transition: transform 0.3s ease, background-color 0.3s ease; /* Hover transition */

        /* Initial state for appearing animation */
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.6s ease-out, transform 0.6s ease-out;
    }

     .language-node.node-appearing {
         opacity: 1;
         transform: translateY(0);
     }

     .language-node:hover {
         background-color: #e3f2fd; /* Light blue hover */
         transform: translateY(-5px); /* Lift effect */
     }

     .language-node .linguistic-notes {
         font-size: 0.8em; /* Slightly larger note font */
         color: #555;
         margin-top: 8px; /* More space */
         border-top: 1px solid var(--secondary-color); /* Softer divider */
         padding-top: 5px;
     }


    button {
        padding: 12px 25px; /* More padding */
        font-size: 1.1em; /* Larger font */
        margin: 15px 10px; /* More margin */
        cursor: pointer;
        background-color: var(--primary-color);
        color: white;
        border: none;
        border-radius: 8px; /* More rounded */
        transition: background-color 0.3s ease, transform 0.1s ease;
        box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
    }

    button:hover {
        background-color: #356182; /* Darker steelblue */
        transform: translateY(-2px); /* Lift effect on hover */
    }
     button:active {
         transform: translateY(0); /* Press effect */
         box-shadow: 1px 1px 3px rgba(0,0,0,0.2);
     }

    #resetBtnContainer {
        display: inline-block;
    }

    .completion-message {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: #e8f5e9; /* Light green background */
        border: 2px solid #4CAF50; /* Green border */
        border-radius: 10px;
        padding: 20px 30px;
        z-index: 5;
        text-align: center;
        box-shadow: 0 0 15px rgba(0,0,0,0.2);
         opacity: 0; /* Start hidden for animation */
         transition: opacity 0.8s ease-out; /* Fade in */
    }
     .completion-message.fade-in {
         opacity: 1;
     }
    .completion-message h3 {
        color: #2E7D32; /* Dark green */
        margin-top: 0;
        margin-bottom: 10px;
    }
    .completion-message p {
         text-align: center;
         margin-bottom: 0;
         font-size: 1.1em;
         color: #388E3C; /* Medium green */
    }


    #explanationNotes {
        margin-top: 30px; /* More space */
        padding: 20px;
        border: 1px dashed var(--primary-color); /* Dashed primary color border */
        background-color: var(--background-medium); /* Light background */
        border-radius: 8px;
        text-align: right;
         opacity: 0; /* Start hidden for animation */
         transition: opacity 0.6s ease-out; /* Fade in */
    }
     #explanationNotes.fade-in {
         opacity: 1;
     }

    #explanationNotes h3 {
        margin-top: 0;
        color: var(--primary-color);
        margin-bottom: 15px;
    }

    #explanationNotes ul {
        list-style: disc inside;
        padding: 0;
        text-align: right;
    }
    #explanationNotes li {
        margin-bottom: 10px; /* More space between items */
        line-height: 1.6;
        text-align: right;
    }


    .toggle-explanation-btn {
        display: block; /* Make button block level */
        margin: 30px auto; /* Center button */
        width: fit-content; /* Fit to content */
        background-color: #607D8B; /* Grey-ish blue */
    }
     .toggle-explanation-btn:hover {
          background-color: #455A64; /* Darker grey-ish blue */
     }


    #detailedExplanation {
        margin-top: 30px;
        padding: 30px; /* More padding */
        border: 1px solid var(--border-color);
        border-radius: 12px;
        background-color: var(--background-light); /* Lighter background */
        text-align: right;
         opacity: 0; /* Start hidden for animation */
         transition: opacity 0.8s ease-out; /* Fade in */
    }
     #detailedExplanation.fade-in {
         opacity: 1;
     }

    #detailedExplanation h2, #detailedExplanation h3 {
        color: var(--primary-color);
        border-bottom: 1px solid var(--secondary-color); /* Softer border */
        padding-bottom: 8px; /* More space below border */
        margin-top: 25px;
        margin-bottom: 18px;
        text-align: right;
    }

    #detailedExplanation p {
        line-height: 1.8; /* Increased line height */
        margin-bottom: 18px;
        text-align: right;
    }

    #detailedExplanation ul {
        margin-bottom: 18px;
        padding-right: 25px; /* Adjust padding for RTL */
        padding-left: 0;
        list-style: disc outside;
        text-align: right;
    }
     #detailedExplanation ul li {
        margin-bottom: 10px;
        line-height: 1.6;
        text-align: right;
     }
      #detailedExplanation ul ul {
           list-style: circle outside;
           margin-top: 10px;
           margin-bottom: 0;
           padding-right: 25px;
      }

    /* SVG for lines */
    .language-line-canvas {
        pointer-events: none;
        z-index: 0;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: visible;
    }
    .language-line {
        stroke: rgba(70, 130, 180, 0.5); /* Slightly transparent steelblue */
        stroke-width: 2;
         /* Opacity transition handled in JS for timing with node appearance */
         /* transition: opacity 0.5s ease-out; */
    }

</style>