---
title: "××©×™××” ×‘××™×§×¨×•×‘×™×•×: ×ª×›× ×•×Ÿ ××¡×¢ ×œ×’×™×œ×•×™"
english_slug: microbiome-mission-research-planning
category: "×‘×™×•×œ×•×’×™×”"
tags: ["××™×§×¨×•×‘×™×•×", "××—×§×¨ ××“×¢×™", "×‘×™×•×œ×•×’×™×”", "×‘×¨×™××•×ª", "×ª×›× ×•×Ÿ × ×™×¡×•×™"]
---
<div class="mission-container">
    <h1>ğŸš€ ××©×™××” ×‘××™×§×¨×•×‘×™×•×: ×ª×›× ×•×Ÿ ××¡×¢ ×œ×’×™×œ×•×™</h1>
    <p class="intro-text">×¦××• ×œ××¡×¢ ××“×¢×™ ××¨×ª×§ ×œ×ª×•×š ×”×¢×•×œ× ×”×¤× ×™××™ ×©×œ× ×•! ×‘×ª×•×š ×›×œ ××—×“ ×•××—×ª ×××™×ª× ×• ×©×•×›× ×ª ××§×•×œ×•×’×™×” ××“×”×™××” ×©×œ ××™×œ×™××¨×“×™ ××™×§×¨×•××•×¨×’× ×™×–××™× - ×”××™×§×¨×•×‘×™×•×. ××™×š ××“×¢× ×™× ×¤×•×¨×¦×™× ××ª ×“×¨×›× ×œ×—×©×•×£ ××ª ×”×¡×•×“×•×ª ×©×œ ×”×¢×•×œ× ×”××™×§×¨×•×¡×§×•×¤×™ ×”×–×”? ×”××©×™××” ×©×œ×›×: ×œ×ª×›× ×Ÿ × ×™×¡×•×™ ×¤×•×¨×¥ ×“×¨×š ×œ×—×§×¨ ×”××™×§×¨×•×‘×™×•× ×”×× ×•×©×™. ×›×œ ×”×—×œ×˜×” ×ª×©×¤×™×¢ ×¢×œ ×”×ª×§×¦×™×‘, ×”×–××Ÿ, ×•××™×›×•×ª ×”×ª×•×¦××•×ª ×©×œ ×”××©×™××”!</p>

    <div id="app" class="mission-app">
        <div id="status" class="mission-status">
            <h2>ğŸ“Š ×“×©×‘×•×¨×“ ××©×™××”</h2>
            <p> ×ª×§×¦×™×‘ ×”×ª×—×œ×ª×™: $<span id="initial-budget">100,000</span></p>
            <p> ×–××Ÿ ×©×”×•×§×¦×‘: <span id="initial-time">12</span> ×—×•×“×©×™×</p>
            <div class="status-breakdown">
                 <p> ×¢×œ×•×ª ××©×™××” ××¦×˜×‘×¨×ª: $<span id="current-cost-added" class="status-cost">0</span></p>
                 <p> ×–××Ÿ ××©×™××” × ×•×¡×£: <span id="current-time-added" class="status-time">0</span> ×—×•×“×©×™×</p>
            </div>
        </div>

        <div id="steps-container" class="steps-container">
            <div id="step-1" class="step active">
                <h3>ğŸ¯ ×©×œ×‘ 1: ×”×’×“×¨×ª ×™×¢×“ - ××•×›×œ×•×¡×™×™×ª ××—×§×¨ ×•×©××œ×ª ××¤×ª×—</h3>
                <p>××ª ××™ × ×—×§×•×¨? ×‘×—×™×¨×” ×–×• ×ª×©×¤×™×¢ ×¢×œ ××•×¨×›×‘×•×ª ×’×™×•×¡ ×”××©×ª×ª×¤×™× ×•×”×”×•×¦××•×ª.</p>
                <div class="choice-group" data-step="1">
                    <label class="choice-label"><input type="radio" name="population" value="healthy" data-cost="0" data-time="0" data-population="×× ×©×™× ×‘×¨×™××™× (×§×‘×•×¦×ª ×‘×§×¨×” ×‘×¨×™××™×)"> <span class="choice-text">×× ×©×™× ×‘×¨×™××™× ×‘×œ×‘×“</span> <span class="choice-meta">(×¤×©×•×˜ ×œ×’×™×•×¡, ×¢×œ×•×ª ×•×–××Ÿ ××™× ×™××œ×™×™×)</span></label>
                    <label class="choice-label"><input type="radio" name="population" value="diseased" data-cost="15000" data-time="1.5" data-population="×—×•×œ×™× ×‘××¦×‘ ×¡×¤×¦×™×¤×™ + ×§×‘×•×¦×ª ×‘×§×¨×ª ×‘×¨×™××™×"> <span class="choice-text">×—×•×œ×™× ×‘××¦×‘ ×¡×¤×¦×™×¤×™ (×œ××©×œ, ×¡×•×›×¨×ª / ××—×œ×ª ××¢×™) + ×‘×§×¨×ª ×‘×¨×™××™×</span> <span class="choice-meta">(×’×™×•×¡ ××•×¨×›×‘ ×™×•×ª×¨, ×¢×œ×•×ª ×•×–××Ÿ × ×•×¡×¤×™× ××©××¢×•×ª×™×™×)</span></label>
                </div>
            </div>

            <div id="step-2" class="step">
                <h3>ğŸ”¬ ×©×œ×‘ 2: ×‘×—×™×¨×ª ×©×“×” ××™×¡×•×£ - ××ª×¨ ×“×’×™××” ×•×©×™×˜×”</h3>
                <p>×××™×Ÿ × ××¡×•×£ ××ª ×”×“×’×™××•×ª? ×‘×—×™×¨×” ×–×• ×ª×©×¤×™×¢ ×¢×œ ×¡×•×’ ×”××™×§×¨×•×‘×™×•× ×”× ×—×§×¨ ×•×¢×œ ×©×™×˜×ª ×”××™×¡×•×£ (×¤×©×•×˜×” ××• ×¤×•×œ×©× ×™×ª).</p>
                 <div class="choice-group" data-step="2">
                    <label class="choice-label"><input type="radio" name="sampling" value="gut-stool" data-cost="1000" data-time="0.1" data-site="××¢×™" data-type="×¦×•××”" data-invasiveness="×œ× ×¤×•×œ×©× ×™×ª"> <span class="choice-text">××¢×™ (×“×’×™××ª ×¦×•××”)</span> <span class="choice-meta">(×”× ×¤×•×¥ ×‘×™×•×ª×¨, ×œ× ×¤×•×œ×©× ×™, ××™×™×¦×’ ××ª ××™×§×¨×•×‘×™×•× ×”××¢×™)</span></label>
                    <label class="choice-label"><input type="radio" name="sampling" value="skin-swab" data-cost="500" data-time="0.05" data-site="×¢×•×¨" data-type="××©×˜×—" data-invasiveness="×œ× ×¤×•×œ×©× ×™×ª"> <span class="choice-text">×¢×•×¨ (××©×˜×— ×¢×•×¨)</span> <span class="choice-meta">(×§×œ ×œ××™×¡×•×£, ×œ× ×¤×•×œ×©× ×™, ×—×§×¨ ××™×§×¨×•×‘×™×•× ×”×¢×•×¨)</span></label>
                    <label class="choice-label"><input type="radio" name="sampling" value="oral-swab" data-cost="500" data-time="0.05" data-site="×¤×”" data-type="××©×˜×—" data-invasiveness="×œ× ×¤×•×œ×©× ×™×ª"> <span class="choice-text">×¤×” (××©×˜×— ×¨×•×§/×—× ×™×›×™×™×)</span> <span class="choice-meta">(×§×œ ×œ××™×¡×•×£, ×œ× ×¤×•×œ×©× ×™, ×—×§×¨ ××™×§×¨×•×‘×™×•× ×”×¤×”)</span></label>
                    <label class="choice-label"><input type="radio" name="sampling" value="gut-biopsy" data-cost="25000" data-time="3" data-site="××¢×™" data-type="×‘×™×•×¤×¡×™×”" data-invasiveness="×¤×•×œ×©× ×™×ª"> <span class="choice-text">××¢×™ (×‘×™×•×¤×¡×™×” - ××™×¡×•×£ ×¨×§××” ×× ×“×•×¡×§×•×¤×™)</span> <span class="choice-meta">(×¤×•×œ×©× ×™, ×“×’×™××” ×™×©×™×¨×” ××¨×§××ª ×”××¢×™, ×¢×œ×•×ª ×•×–××Ÿ ×’×‘×•×”×™× ×‘××™×•×—×“, ×“×•×¨×© ××™×©×•×¨ ××ª×™ ××•×¨×›×‘)</span></label>
                 </div>
            </div>

            <div id="step-3" class="step">
                <h3>ğŸ§¬ ×©×œ×‘ 3: ×¤×™×¦×•×— ×”×§×•×“ - ×˜×›× ×•×œ×•×’×™×™×ª ×¨×™×¦×•×£</h3>
                <p>××™×š × ×¤×¢× ×— ××ª ×”×–×”×•×ª ×•×ª×¤×§×™×“×™ ×”××™×§×¨×•××•×¨×’× ×™×–××™× ×‘×“×’×™××•×ª? ×‘×—×™×¨×” ×–×• ×ª×©×¤×™×¢ ×“×¨××˜×™×ª ×¢×œ ×¢×œ×•×ª, ×–××Ÿ ×•×¢×•××§ ×”××™×“×¢.</p>
                <div class="choice-group" data-step="3">
                    <label class="choice-label"><input type="radio" name="sequencing" value="16S" data-cost="10000" data-time="1" data-resolution="×˜×§×¡×•× ×•××™ (××™× ×™×)" data-datatype="×–×™×”×•×™ ××™×§×¨×•××•×¨×’× ×™×–××™× ×•×©×™×¢×•×¨× ×”×™×—×¡×™"> <span class="choice-text">×¨×™×¦×•×£ 16S rRNA</span> <span class="choice-meta">(×–×•×œ ×•××”×™×¨ ×™×—×¡×™×ª, ××–×”×” ××™×œ×• ×—×™×™×“×§×™× ×§×™×™××™× ×•×‘××™×–×” ×©×›×™×—×•×ª, ×œ× ××¡×¤×§ ××™×“×¢ ×¢×œ ×¤×•× ×§×¦×™×•×ª)</span></label>
                    <label class="choice-label"><input type="radio" name="sequencing" value="shotgun" data-cost="60000" data-time="4" data-resolution="×˜×§×¡×•× ×•××™ ×‘×¨××ª ×–×Ÿ + ×¤×•× ×§×¦×™×•× ×œ×™" data-datatype="×–×™×”×•×™ ××“×•×™×§ ×™×•×ª×¨ ×©×œ ××™×§×¨×•××•×¨×’× ×™×–××™× ×•×™×›×•×œ×•×ª×™×”× ×”××˜×‘×•×œ×™×•×ª/×¤×•× ×§×¦×™×•× ×œ×™×•×ª"> <span class="choice-text">×¨×™×¦×•×£ Shotgun Metagenomic</span> <span class="choice-meta">(×™×§×¨ ×•×××•×©×š ××©××¢×•×ª×™×ª, ××–×”×” ×‘×¨××ª ×–×Ÿ, ×›×•×œ×œ ××™×“×¢ ×¢×œ ×’× ×™× ×•×ª×¤×§×•×“×™× ××¤×©×¨×™×™×)</span></label>
                </div>
            </div>

            <div id="step-4" class="step">
                <h3>ğŸ‘¥ ×©×œ×‘ 4: ×›×•×— ×”× ×ª×•× ×™× - ×’×•×“×œ ×”××“×’×</h3>
                <p>×›××” ××©×ª×ª×¤×™× ×™×›×œ×•×œ ×”××—×§×¨? ×‘×—×™×¨×” ×–×• ×ª×©×¤×™×¢ ×™×©×™×¨×•×ª ×¢×œ ×¢×œ×•×ª, ×–××Ÿ ×•×¢×œ ×”×›×•×— ×”×¡×˜×˜×™×¡×˜×™ ×©×œ ×”××¡×§× ×•×ª.</p>
                <div class="choice-group" data-step="4">
                    <label class="choice-label"><input type="radio" name="sample-size" value="small" data-cost="5000" data-time="0.5" data-size="×§×˜×Ÿ" data-power="× ××•×š" data-num-samples="20"> <span class="choice-text">××“×’× ×§×˜×Ÿ (×›-20 ×“×’×™××•×ª)</span> <span class="choice-meta">(×–×•×œ ×•××”×™×¨, ×¡×™×›×•×™ × ××•×š ×œ×’×œ×•×ª ×”×‘×“×œ×™× ×§×˜× ×™× ××š ××©××¢×•×ª×™×™×)</span></label>
                    <label class="choice-label"><input type="radio" name="sample-size" value="medium" data-cost="15000" data-time="1.5" data-size="×‘×™× ×•× ×™" data-power="×‘×™× ×•× ×™" data-num-samples="50"> <span class="choice-text">××“×’× ×‘×™× ×•× ×™ (×›-50 ×“×’×™××•×ª)</span> <span class="choice-meta">(××™×–×•×Ÿ ×˜×•×‘ ×™×—×¡×™×ª ×‘×™×Ÿ ×¢×œ×•×ª/×–××Ÿ ×œ×›×•×— ×¡×˜×˜×™×¡×˜×™)</span></label>
                    <label class="choice-label"><input type="radio" name="sample-size" value="large" data-cost="30000" data-time="2.5" data-size="×’×“×•×œ" data-power="×’×‘×•×”" data-num-samples="100"> <span class="choice-text">××“×’× ×’×“×•×œ (×›-100 ×“×’×™××•×ª)</span> <span class="choice-meta">(×™×§×¨ ×•×××•×©×š, ×¡×™×›×•×™ ×’×‘×•×” ×™×•×ª×¨ ×œ×’×œ×•×ª ×”×‘×“×œ×™× ××©××¢×•×ª×™×™×, ×ª×•×¦××•×ª ×××™× ×•×ª ×™×•×ª×¨)</span></label>
                </div>
            </div>

            <button id="next-step" class="mission-button">×”××©×š ×œ×©×œ×‘ ×”×‘× â¡ï¸</button>
            <button id="show-summary" class="mission-button primary" style="display: none;">×¡×™×›×•× ×ª×•×›× ×™×ª ×”××©×™××” âœ¨</button>
        </div>

        <div id="summary" class="mission-summary" style="display: none;">
            <h2>âœ… ×¡×™×›×•× ××©×™××”: ×ª×•×›× ×™×ª ×”××—×§×¨ ×©×œ×š</h2>
             <p>×”× ×” ×”×ª×•×›× ×™×ª ×©×™×¦×¨×ª ×œ××¡×¢ ×’×™×œ×•×™ ×”××™×§×¨×•×‘×™×•× ×©×œ×š:</p>

            <div class="summary-section">
                <h3>×‘×—×™×¨×•×ª ××¤×ª×—:</h3>
                <p><strong>××•×›×œ×•×¡×™×™×ª ××—×§×¨:</strong> <span id="summary-population"></span></p>
                <p><strong>××ª×¨ ×•×©×™×˜×ª ×“×’×™××”:</strong> <span id="summary-sampling"></span> (<span id="summary-invasiveness"></span>)</p>
                <p><strong>×˜×›× ×•×œ×•×’×™×™×ª ×¨×™×¦×•×£:</strong> <span id="summary-sequencing"></span> (×¨×–×•×œ×•×¦×™×”: <span id="summary-resolution"></span>)</p>
                <p><strong>×’×•×“×œ ××“×’×:</strong> <span id="summary-sample-size"></span> (<span id="summary-num-samples"></span> ×“×’×™××•×ª, ×›×•×— ×¡×˜×˜×™×¡×˜×™ <span id="summary-power"></span>)</p>
            </div>

            <div class="summary-section costs-times">
                <h3>××©××‘×™× ×•×œ×•×— ×–×× ×™×:</h3>
                <p> ×ª×§×¦×™×‘ ×”×ª×—×œ×ª×™: $<span id="summary-initial-budget"></span></p>
                <p> ×¢×œ×•×ª ×›×•×œ×œ×ª ×©×œ ×”×‘×—×™×¨×•×ª: $<span id="summary-total-cost-added"></span></p>
                <p class="summary-remaining-budget"> ×ª×§×¦×™×‘ × ×•×ª×¨: $<span id="summary-remaining-budget"></span></p>
                <p> ×–××Ÿ ×”×ª×—×œ×ª×™: <span id="summary-initial-time"></span> ×—×•×“×©×™×</p>
                <p class="summary-total-time"> ×–××Ÿ × ×“×¨×© ×›×•×œ×œ: <span id="summary-total-time-needed"></span> ×—×•×“×©×™×</p>
            </div>

             <div class="summary-section outcome">
                 <h3>ğŸ’¡ ×ª×•×‘× ×•×ª ×•×”×©×œ×›×•×ª ×”×ª×•×›× ×™×ª:</h3>
                 <p><strong>×¡×•×’ ×”× ×ª×•× ×™× ×©×ª×§×‘×œ:</strong> <span id="summary-data-type"></span></p>
                 <div id="summary-limitations" class="limitations"></div>
             </div>
        </div>
    </div>

    <button id="explanation-toggle" class="mission-button secondary">×”×¦×’/×”×¡×ª×¨ ×”×¡×‘×¨ ×¢×œ ××™×§×¨×•×‘×™×•× ×•××—×§×¨</button>

    <div id="explanation" class="explanation-box" style="display: none;">
        <h2>×”×¡×‘×¨ ×¢×œ ××™×§×¨×•×‘×™×•× ×•×ª×›× ×•×Ÿ ××—×§×¨ ××“×¢×™</h2>
        <p>×”××™×§×¨×•×‘×™×•× ×”×× ×•×©×™ ×”×•× ××•×¡×£ ×›×œ ×”××™×§×¨×•××•×¨×’× ×™×–××™× (×—×™×™×“×§×™×, ×¤×˜×¨×™×•×ª, ×•×™×¨×•×¡×™× ×•××¨×›××”) ×”×—×™×™× ×¢×œ ×•×‘×ª×•×š ×’×•×¤× ×•. ×”×•× ××”×•×•×” ××¢×¨×›×ª ××§×•×œ×•×’×™×ª ××•×¨×›×‘×ª ×•×—×™×•× ×™×ª ×œ×‘×¨×™××•×ª× ×•.</p>
        <h3>×—×©×™×‘×•×ª ×”××™×§×¨×•×‘×™×•× ×œ×‘×¨×™××•×ª</h3>
        <ul>
            <li>×¢×™×›×•×œ ××–×•×Ÿ ×•×™×™×¦×•×¨ ×•×™×˜××™× ×™× ×—×™×•× ×™×™×.</li>
            <li>×”×’× ×” ××¤× ×™ ×¤×ª×•×’× ×™× (××—×•×œ×œ×™ ××—×œ×”) ×¢×œ ×™×“×™ ×™×¦×™×¨×ª ×ª×—×¨×•×ª ×•×”×¤×¨×©×ª ×—×•××¨×™× ××¢×›×‘×™×.</li>
            <li>×”×ª×¤×ª×—×•×ª ×•×ª×¤×§×•×“ ×ª×§×™×Ÿ ×©×œ ××¢×¨×›×ª ×”×—×™×¡×•×Ÿ.</li>
            <li>×”×©×¤×¢×” ×¢×œ ×ª×”×œ×™×›×™× ×¤×™×–×™×•×œ×•×’×™×™× ×¨×‘×™×, ×›×•×œ×œ ××˜×‘×•×œ×™×–×, ×“×œ×§×ª, ×•××¤×™×œ×• ×¢×œ ×”××•×— ×•×”×ª× ×”×’×•×ª ×“×¨×š ×¦×™×¨ ×”××¢×™-××•×—.</li>
            <li>×§×©×¨ ×œ××’×•×•×Ÿ ×¨×—×‘ ×©×œ ××¦×‘×™× ×•××—×œ×•×ª, ×›×•×œ×œ ××—×œ×•×ª ××¢×™ ×“×œ×§×ª×™×•×ª, ×”×©×× ×”, ×¡×•×›×¨×ª, ××œ×¨×’×™×•×ª, ××—×œ×•×ª ××•×˜×•××™××•× ×™×•×ª, ×•××£ ×”×¤×¨×¢×•×ª × ×•×™×¨×•×œ×•×’×™×•×ª ×•×¤×¡×™×›×™××˜×¨×™×•×ª.</li>
        </ul>
        <h3>×©××œ×ª ××—×§×¨ ×•×ª×”×œ×™×š ×ª×›× ×•×Ÿ ×‘××“×¢×™ ×”×—×™×™×</h3>
        <p>×›×œ ××—×§×¨ ××“×¢×™ ××ª×—×™×œ ×‘×©××œ×ª ××—×§×¨ ×‘×¨×•×¨×” ×•×××•×§×“×ª. ×ª×›× ×•×Ÿ ×”× ×™×¡×•×™ ×”×•× ×”×©×œ×‘ ×”××›×¨×™×¢ ×©×‘×• ×‘×•× ×™× ××ª ×”×“×¨×š ×œ×¢× ×•×ª ×¢×œ ×”×©××œ×” ×‘×¦×•×¨×” ×”×××™× ×” ×•×”×™×¢×™×œ×” ×‘×™×•×ª×¨, ×ª×•×š ×”×ª×—×©×‘×•×ª ×§×¤×“× ×™×ª ×‘××’×‘×œ×•×ª ××©××‘×™× (×›×¡×£, ×–××Ÿ, ×›×•×— ××“×) ×•×©×™×§×•×œ×™× ××ª×™×™×.</p>
        <h3>×©×™×§×•×œ×™× ××¨×›×–×™×™× ×‘×ª×›× ×•×Ÿ ××—×§×¨ ××™×§×¨×•×‘×™×•×</h3>
        <ul>
            <li><strong>××•×›×œ×•×¡×™×™×ª ××—×§×¨ ×•×§×‘×•×¦×•×ª ×‘×§×¨×”:</strong> ××™ ×”××©×ª×ª×¤×™× ×‘××—×§×¨? ×”×× × ×“×¨×©×ª ×§×‘×•×¦×ª ×‘×§×¨×” (×œ××©×œ, ×‘×¨×™××™× ×œ×”×©×•×•××” ×œ×—×•×œ×™×)? ×”×’×“×¨×” ××“×•×™×§×ª ×—×™×•× ×™×ª ×œ×’×™×•×¡ ×•×œ×¤×¨×©× ×•×ª × ×›×•× ×”.</li>
            <li><strong>××ª×¨×™ ×“×’×™××” ×©×•× ×™× ×‘×’×•×£:</strong> ×œ×›×œ ××ª×¨ ×‘×’×•×£ (××¢×™, ×¢×•×¨, ×¤×”, ××¢×¨×›×ª ×”××™×Ÿ ×•×”×©×ª×Ÿ, ×¨×™××•×ª ×•×›×•') ×™×© ×”×¨×›×‘ ××™×§×¨×•×‘×™×•× ×™×™×—×•×“×™. ×‘×—×™×¨×ª ×”××ª×¨ ×—×™×™×‘×ª ×œ×”×™×•×ª ××•×ª×××ª ×œ×©××œ×ª ×”××—×§×¨.</li>
            <li><strong>×©×™×˜×•×ª ×“×’×™××” (×¤×¨×•×˜×•×§×•×œ×™×, ××™×¡×•×£):</strong> ××•×¤×Ÿ ××™×¡×•×£ ×”×“×’×™××” (×¦×•××”, ××©×˜×—, ×‘×™×•×¤×¡×™×”, ×©×˜×™×¤×” ×•×›×•') ××©×¤×™×¢ ×¢×œ ×¡×•×’ ×”×—×™×™×“×§×™× ×©× ×“×’××™× ×•×¢×œ ××™×“×ª ×”×¤×•×œ×©× ×•×ª. ×¡×˜× ×“×¨×˜×™×–×¦×™×” ×§×¤×“× ×™×ª ×©×œ ×¤×¨×•×˜×•×§×•×œ×™ ×”××™×¡×•×£ ×•×”×©×™××•×¨ (×œ××©×œ, ×”×§×¤××” ××”×™×¨×”) ×—×™×•× ×™×ª ×œ×× ×™×¢×ª ×©×™× ×•×™×™× ×‘×”×¨×›×‘ ×”××™×§×¨×•×‘×™×•× ×œ×¤× ×™ ×”× ×™×ª×•×—.</li>
            <li><strong>×˜×›× ×•×œ×•×’×™×•×ª ××¢×‘×“×” ×œ× ×™×ª×•×— ×”××™×§×¨×•×‘×™×•×:</strong>
                <ul>
                    <li><strong>×¨×™×¦×•×£ 16S rRNA:</strong> ×©×™×˜×” ×¤×•×¤×•×œ×¨×™×ª ×•×–×•×œ×” ×™×—×¡×™×ª ×”××¨×¦×¤×ª ×’×Ÿ ×¡×¤×¦×™×¤×™ ×”××¦×•×™ ×‘×—×™×™×“×§×™×. ××©××©×ª ×›"×‘×¨×§×•×“" ×œ×–×™×”×•×™ ×˜×§×¡×•× ×•××™ ×©×œ ×”×—×™×™×“×§×™× ×”×§×™×™××™× ×‘×“×’×™××” ×•×©×™×¢×•×¨× ×”×™×—×¡×™. ×©×™×˜×” ×–×• ××™× ×” ××¡×¤×§×ª ××™×“×¢ ×™×©×™×¨ ×¢×œ ×”×¤×•× ×§×¦×™×•×ª ×©×”×—×™×™×“×§×™× ××‘×¦×¢×™×.</li>
                    <li><strong>×¨×™×¦×•×£ Shotgun Metagenomic:</strong> ×©×™×˜×” ××§×™×¤×” ×•×™×§×¨×” ×™×•×ª×¨ ×”××¨×¦×¤×ª ××ª ×›×œ ××§×˜×¢×™ ×”-DNA ××›×œ ×”××•×¨×’× ×™×–××™× ×‘×“×’×™××” (×—×™×™×“×§×™×, ×¤×˜×¨×™×•×ª, ×•×™×¨×•×¡×™×). ××¡×¤×§×ª ×–×™×”×•×™ ×˜×§×¡×•× ×•××™ ×‘×¨×–×•×œ×•×¦×™×” ×’×‘×•×”×” ×™×•×ª×¨ (×¢×“ ×¨××ª ×–×Ÿ) ×•×›×Ÿ ××™×“×¢ ×¢×©×™×¨ ×¢×œ ×”×¤×•×˜× ×¦×™××œ ×”××˜×‘×•×œ×™ ×•×”×¤×•× ×§×¦×™×•× ×œ×™ ×©×œ ×”×§×”×™×œ×” ×”××™×§×¨×•×‘×™××œ×™×ª (××™×œ×• ×× ×–×™××™×, ××¡×œ×•×œ×™× ××˜×‘×•×œ×™×™× ×•×™×›×•×œ×•×ª ××—×¨×•×ª ×§×™×™××™×).</li>
                </ul>
            </li>
            <li><strong>× ×™×ª×•×— × ×ª×•× ×™× ×•×‘×™×•××™× ×¤×•×¨××˜×™×§×”:</strong> × ×ª×•× ×™ ××™×§×¨×•×‘×™×•× ×”× ×¢×¦×•××™× ×•××•×¨×›×‘×™×. × ×“×¨×©×™× ×›×•×— ×—×™×©×•×‘ ×•×›×œ×™× ×‘×™×•-××™× ×¤×•×¨××˜×™×™× ××ª×§×“××™× ×œ×¢×™×‘×•×“ ×”× ×ª×•× ×™×, ×–×™×”×•×™ ×”××™×§×¨×•××•×¨×’× ×™×–××™×, × ×™×ª×•×— ×”×¨×›×‘ ×”×§×”×™×œ×•×ª ×•×”×©×•×•××ª×Ÿ ×‘×™×Ÿ ×§×‘×•×¦×•×ª ×©×•× ×•×ª, ×•×§×™×©×•×¨ ×”×××¦××™× ×œ× ×ª×•× ×™× ×”×§×œ×™× ×™×™× ××• ×”×××¤×™×™× ×™× ×©×œ ×”××©×ª×ª×¤×™×.</li>
        </ul>
        <h3>××ª×’×¨×™× ×•×©×™×§×•×œ×™× ××ª×™×™× ×‘××—×§×¨ ××™×§×¨×•×‘×™×•×</h3>
        <p>××ª×’×¨×™× ××¨×›×–×™×™× ×›×•×œ×œ×™× ××ª ×”×¨×¢×© ×”××•×‘× ×” ×‘× ×ª×•× ×™× (×©×•× ×•×ª ×‘×™×•×œ×•×’×™×ª ×•×˜×¢×•×™×•×ª ×˜×›× ×™×•×ª), ×’×•×“×œ ×”× ×ª×•× ×™× ×”×¢×¦×•×, ×”×¦×•×¨×š ×‘×¡×˜× ×“×¨×˜×™×–×¦×™×” ×—×•×¦×ª-××¢×‘×“×•×ª, ×•×‘×¢×™×§×¨ ×”×§×•×©×™ ×‘×§×‘×™×¢×ª ×¡×™×‘×ª×™×•×ª (×”×× ×©×™× ×•×™ ×‘××™×§×¨×•×‘×™×•× *×’×•×¨×* ×œ××¦×‘ ××¡×•×™× ××• ×©×”×•× ×¨×§ *×ª×•×¦××”* ×©×œ×•?). ×©×™×§×•×œ×™× ××ª×™×™× ×—×™×•× ×™×™× ×‘××™×•×—×“ ×‘××—×§×¨×™× ×”×›×•×œ×œ×™× ×¤×¨×•×¦×“×•×¨×•×ª ×¤×•×œ×©× ×™×•×ª ××• ××™×¡×•×£ × ×ª×•× ×™× ××™×©×™×™× ×¨×’×™×©×™× (×›××• × ×ª×•× ×™× ×‘×¨×™××•×ª×™×™×, ×ª×–×•× ×ª×™×™×, ××•×¨×— ×—×™×™×). × ×“×¨×©×ª ×”×¡×›××” ××“×¢×ª ××œ××” ×•×©××™×¨×” ×§×¤×“× ×™×ª ×¢×œ ×¤×¨×˜×™×•×ª ×”××©×ª×ª×¤×™×.</p>
        <h3>×“×•×’×××•×ª ×œ×ª×•×‘× ×•×ª ×××—×§×¨×™ ××™×§×¨×•×‘×™×•× ×¤×•×¨×¦×™ ×“×¨×š</h3>
        <ul>
            <li>×’×™×œ×•×™ ×§×©×¨×™× ×—×–×§×™× ×‘×™×Ÿ ×”×¨×›×‘ ××™×§×¨×•×‘×™×•× ×”××¢×™ ×œ×”×©×× ×”, ×¡×•×›×¨×ª ××¡×•×’ 2 ×•×ª× ×’×•×“×ª ×œ××™× ×¡×•×œ×™×Ÿ.</li>
            <li>×”×“×’××ª ×”×”×©×¤×¢×” ×”××–×™×§×” ×•×”×××•×©×›×ª ×©×œ ×× ×˜×™×‘×™×•×˜×™×§×” ×¢×œ ×”××™×§×¨×•×‘×™×•× ×•×”×§×©×¨ ×œ×¡×™×›×•×Ÿ ××•×’×‘×¨ ×œ××—×œ×•×ª ×‘×”××©×š ×”×—×™×™×.</li>
            <li>×¤×™×ª×•×— ×˜×™×¤×•×œ×™× ××‘×•×¡×¡×™ ××™×§×¨×•×‘×™×•×, ×›××• ×”×©×ª×œ×ª ×¦×•××” (Fecal Microbiota Transplantation - FMT), ×©×”×¤×›×” ×œ×˜×™×¤×•×œ ×”××•××œ×¥ ×œ×–×™×”×•× ×—×•×–×¨ ×‘×—×™×™×“×§ <em>Clostridioides difficile</em>, ××” ×©××“×’×™× ×§×©×¨ ×¡×™×‘×ª×™ ×•×¤×•×˜× ×¦×™××œ ×˜×™×¤×•×œ×™.</li>
            <li>×–×™×”×•×™ "×—×ª×™××•×ª" ××™×§×¨×•×‘×™××œ×™×•×ª ×‘××™×§×¨×•×‘×™×•× ×”××¢×™, ×”×¢×•×¨ ××• ×”×¤×”, ×”×§×©×•×¨×•×ª ×œ××¦×‘×™× ××’×•×•× ×™× ×›××• ××—×œ×•×ª ×“×œ×§×ª×™×•×ª ×›×¨×•× ×™×•×ª, ××•×˜×™×–×, ×“×™×›××•×Ÿ, ×•××£ ×œ×—×™×–×•×™ ×ª×’×•×‘×” ×œ×˜×™×¤×•×œ×™× ××¡×•×™××™× (×œ××©×œ, ×ª×’×•×‘×” ×˜×•×‘×” ×™×•×ª×¨ ×œ××™××•× ×•×ª×¨×¤×™×” ×‘×¡×¨×˜×Ÿ).</li>
        </ul>
    </div>
</div>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700&display=swap');

    :root {
        --primary-color: #007bff;
        --secondary-color: #28a745;
        --accent-color: #ffc107;
        --background-color: #eef2f7;
        --card-background: #ffffff;
        --text-color: #343a40;
        --border-color: #ced4da;
        --warning-color: #dc3545;
        --info-color: #17a2b8;
        --success-color: #28a745;
        --hover-light: #f8f9fa;
    }

    body {
        font-family: 'Heebo', sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 20px;
        direction: rtl;
        text-align: right;
        background-color: var(--background-color);
        color: var(--text-color);
    }

    .mission-container {
        max-width: 900px;
        margin: 20px auto;
        padding: 30px;
        background-color: var(--card-background);
        border-radius: 12px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    h1, h2, h3 {
        color: var(--primary-color);
        margin-bottom: 15px;
    }

    h1 {
        text-align: center;
        color: #0056b3;
    }

    .intro-text {
        text-align: center;
        margin-bottom: 30px;
        color: #555;
        font-size: 1.1em;
    }

    .mission-app {
        border: 1px solid var(--border-color);
        padding: 25px;
        border-radius: 8px;
        margin-bottom: 30px;
        background-color: #fefefe;
        box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    .mission-status {
        margin-bottom: 25px;
        padding: 18px;
        background-color: #e9ecef;
        border-radius: 5px;
        border: 1px solid #dee2e6;
    }

    .mission-status h2 {
        margin-top: 0;
        color: #0056b3;
        font-size: 1.4em;
        border-bottom: 1px dashed #ced4da;
        padding-bottom: 10px;
        margin-bottom: 10px;
    }

    .status-breakdown {
        display: flex;
        justify-content: space-around;
        gap: 10px;
        flex-wrap: wrap;
    }

    .status-breakdown p {
        margin: 5px 0;
        font-size: 1.1em;
    }

    .status-cost {
        color: var(--warning-color);
        font-weight: bold;
    }
     .status-time {
        color: var(--info-color);
        font-weight: bold;
    }


    .steps-container {
        position: relative; /* Needed for transitions */
    }

    .step {
        border: 1px solid var(--border-color);
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 8px;
        background-color: var(--card-background);
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        position: absolute; /* Use absolute positioning to stack steps */
        top: 0;
        left: 0;
        right: 0;
        z-index: 1; /* Ensure active step is on top */
         box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .step.active {
        display: block; /* Still need block to be visible */
        opacity: 1;
        transform: translateY(0);
        position: static; /* Reset position for active step */
        z-index: 2;
    }

    .step h3 {
        margin-top: 0;
        color: #0056b3;
        font-size: 1.3em;
        border-bottom: 1px solid #eee;
        padding-bottom: 10px;
        margin-bottom: 15px;
    }

    .choice-group {
        margin-top: 15px;
    }

    .choice-label {
        display: flex; /* Use flexbox to align text and radio */
        align-items: center;
        margin-bottom: 12px;
        padding: 12px;
        border: 1px solid #eee;
        border-radius: 5px;
        background-color: var(--hover-light);
        cursor: pointer;
        transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
    }

    .choice-label:hover {
         background-color: #e9ecef;
         border-color: #ced4da;
    }

    .choice-label input[type="radio"] {
        margin-left: 10px; /* Space out radio button from text */
        transform: scale(1.2); /* Slightly larger radio buttons */
         accent-color: var(--primary-color); /* Color the radio button */
    }

    .choice-label input[type="radio"]:checked + .choice-text {
         font-weight: bold;
         color: var(--primary-color);
    }
     .choice-label input[type="radio"]:checked {
        box-shadow: 0 0 5px var(--primary-color);
     }


    .choice-text {
        flex-grow: 1; /* Allow text to take up space */
    }

    .choice-meta {
        font-size: 0.9em;
        color: #6c757d;
        margin-right: 10px; /* Space out meta from text */
        white-space: nowrap; /* Prevent meta text from wrapping awkwardly */
    }


    .mission-button {
        display: block;
        width: auto; /* Auto width */
        padding: 12px 25px;
        background-color: var(--primary-color);
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 20px;
        font-size: 1.1em;
        transition: background-color 0.3s ease, transform 0.1s ease;
        text-align: center; /* Center text */
        margin-left: auto; /* Align right in RTL */
        margin-right: 0;
    }

    .mission-button:hover {
        background-color: #0056b3;
        transform: translateY(-2px);
    }

     .mission-button:active {
         transform: translateY(0);
     }

    .mission-button:disabled {
        background-color: #cccccc;
        cursor: not-allowed;
         transform: none;
    }

    button#show-summary {
         background-color: var(--secondary-color);
          margin: 30px auto 0 auto; /* Center button */
          display: none; /* Handled by JS */
    }
    button#show-summary:hover {
        background-color: #218838;
    }

    button#explanation-toggle {
        background-color: var(--info-color);
        margin: 30px auto 0 auto; /* Center toggle button below app */
        display: block; /* Ensure it's centered */
        text-align: center;
    }
     button#explanation-toggle:hover {
        background-color: #138496;
    }


    .mission-summary {
        border-top: 2px dashed var(--border-color);
        padding-top: 25px;
        margin-top: 25px;
    }

     .mission-summary h2 {
        color: var(--secondary-color);
        border-bottom: 1px solid #eee;
        padding-bottom: 10px;
        margin-bottom: 20px;
     }

    .summary-section {
        background-color: #f8f9fa;
        padding: 15px;
        border-radius: 5px;
        margin-bottom: 15px;
        border: 1px solid #e9ecef;
    }

     .summary-section h3 {
        color: #0056b3;
        margin-top: 0;
        margin-bottom: 10px;
     }

     .costs-times p {
        font-size: 1.1em;
     }

     .summary-remaining-budget {
        font-weight: bold;
        color: var(--success-color); /* Default to green */
     }

     .summary-remaining-budget.warning {
         color: var(--warning-color); /* Red if negative */
     }

     .summary-total-time {
        font-weight: bold;
        color: var(--text-color); /* Default */
     }

     .summary-total-time.warning {
        color: var(--warning-color); /* Red if exceeds initial */
     }


    .limitations ul {
        list-style-type: "âŒ "; /* Use a cross icon */
        margin-right: 20px;
        padding-right: 0; /* Reset default padding */
        color: var(--warning-color); /* Reddish color for limitations */
        margin-top: 10px;
    }

    .limitations li {
        margin-bottom: 8px;
        padding-right: 5px; /* Space after icon */
    }

     .limitations p { /* For the 'no limitations' case */
         color: var(--success-color);
         font-style: italic;
     }


    .explanation-box {
        margin-top: 20px;
        padding: 25px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        background-color: #fefefe;
        display: none; /* Hidden by default */
         box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .explanation-box h2 {
        color: #0056b3;
         border-bottom: 1px solid #eee;
        padding-bottom: 10px;
        margin-bottom: 15px;
    }
     .explanation-box h3 {
        color: #007bff;
        margin-top: 20px;
        margin-bottom: 10px;
     }

    .explanation-box p {
        margin-bottom: 15px;
         color: #555;
    }

    .explanation-box ul {
        list-style-type: disc;
        margin-right: 20px;
        padding-right: 0; /* Reset default padding */
        margin-bottom: 15px;
    }
    .explanation-box ul ul { /* Nested lists */
        list-style-type: circle;
        margin-right: 15px;
         margin-top: 5px;
         margin-bottom: 5px;
    }

    .explanation-box li {
        margin-bottom: 8px;
    }

    /* Responsive basic adjustments */
    @media (max-width: 600px) {
        body {
            padding: 10px;
        }
        .mission-container {
            padding: 20px;
        }
        .status-breakdown {
            flex-direction: column;
             align-items: flex-start;
        }
         .choice-label {
             flex-direction: column;
             align-items: flex-start;
         }
         .choice-meta {
             margin-right: 0;
             margin-top: 5px;
             font-size: 0.85em;
         }
         .choice-label input[type="radio"] {
             margin-left: 0;
             margin-bottom: 5px;
         }
         .mission-button {
             width: 100%;
             margin-left: 0;
             margin-right: 0;
         }
         button#show-summary, button#explanation-toggle {
             margin-left: auto; /* Still try to center if width is less than container */
             margin-right: auto;
         }

         .step {
            padding: 15px;
         }

          .mission-status {
             padding: 15px;
          }
          .mission-summary {
             padding-top: 15px;
          }
          .summary-section {
             padding: 10px;
          }
           .explanation-box {
             padding: 15px;
           }
    }

</style>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const initialBudget = 100000;
        const initialTime = 12; // Initial time in months
        let totalCostAdded = 0;
        let totalTimeAdded = 0;
        let currentStep = 1;
        const totalSteps = 4; // Number of decision steps

        const initialBudgetSpan = document.getElementById('initial-budget');
        const initialTimeSpan = document.getElementById('initial-time');
        const currentCostAddedSpan = document.getElementById('current-cost-added');
        const currentTimeAddedSpan = document.getElementById('current-time-added');
        const stepsContainer = document.getElementById('steps-container');
        const nextStepButton = document.getElementById('next-step');
        const showSummaryButton = document.getElementById('show-summary');
        const summaryDiv = document.getElementById('summary');
        const explanationToggle = document.getElementById('explanation-toggle');
        const explanationDiv = document.getElementById('explanation');

        // Store selected choices and their details
        const choices = {}; // key: radio button name, value: selected option's data attributes

        // Initialize status display
        initialBudgetSpan.textContent = initialBudget.toLocaleString();
        initialTimeSpan.textContent = initialTime;
        updateStatusDisplay(); // Initial display (0 added cost/time)


        // Show the first step
        document.getElementById(`step-${currentStep}`).classList.add('active');
        updateNextButtonState();


        function updateStatusDisplay() {
             currentCostAddedSpan.textContent = totalCostAdded.toLocaleString();
             currentTimeAddedSpan.textContent = totalTimeAdded.toFixed(1); // Show one decimal place
        }

        function updateNextButtonState() {
             const currentStepElement = document.getElementById(`step-${currentStep}`);
             const selectedOption = currentStepElement.querySelector('input[type="radio"]:checked');
             nextStepButton.disabled = !selectedOption;
        }

        // Add event listeners to all radio buttons
         stepsContainer.querySelectorAll('input[type="radio"]').forEach(input => {
            input.addEventListener('change', (event) => {
                const choiceName = event.target.name;
                const cost = parseInt(event.target.dataset.cost);
                const time = parseFloat(event.target.dataset.time); // Use parseFloat for potential decimals
                const value = event.target.value;

                // Find the step element this input belongs to
                 const stepElement = event.target.closest('.step');
                 const stepNumber = stepElement.id.replace('step-', ''); // Get step number from ID

                 // Remove 'selected' class from other labels in the same step/group
                 stepElement.querySelectorAll('.choice-label').forEach(label => {
                     label.classList.remove('selected');
                 });
                 // Add 'selected' class to the chosen label
                 event.target.closest('.choice-label').classList.add('selected');


                // Subtract cost/time of the previously selected option for this group
                if (choices[choiceName]) {
                    totalCostAdded -= choices[choiceName].cost;
                    totalTimeAdded -= parseFloat(choices[choiceName].time);
                }

                // Add cost/time of the newly selected option
                totalCostAdded += cost;
                totalTimeAdded += time;

                // Store the new choice details
                choices[choiceName] = {
                    value: value,
                    cost: cost,
                    time: time,
                    ...event.target.dataset // Store all data attributes
                };

                // Update status display
                updateStatusDisplay();
                updateNextButtonState(); // Re-check button state after selection
            });
        });


        // Navigation logic
        nextStepButton.addEventListener('click', () => {
            const currentStepElement = document.getElementById(`step-${currentStep}`);
            const selectedOption = currentStepElement.querySelector('input[type="radio"]:checked');

            if (!selectedOption) {
                // Should be prevented by button state, but keeping for robustness
                alert('×× × ×‘×—×¨/×™ ××¤×©×¨×•×ª ×œ×¤× ×™ ×”×”××©×š.');
                return;
            }

            // Remove active class and trigger hide transition
            currentStepElement.classList.remove('active');

            // Use a timeout to allow hide transition before showing next step
             setTimeout(() => {
                 currentStep++;

                if (currentStep <= totalSteps) {
                    // Show next step
                    const nextStepElement = document.getElementById(`step-${currentStep}`);
                     if (nextStepElement) { // Check if element exists
                         nextStepElement.classList.add('active');
                         updateNextButtonState(); // Check state for the new step
                     } else {
                          console.error(`Next step element step-${currentStep} not found`);
                           // Fallback to showing summary if next step element is missing
                            nextStepButton.style.display = 'none';
                            showSummaryButton.style.display = 'block';
                            showSummaryButton.click(); // Auto-click summary
                     }
                } else {
                    // All steps completed, show summary button
                    nextStepButton.style.display = 'none';
                    showSummaryButton.style.display = 'block';
                     // Scroll to the summary button/area
                     showSummaryButton.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
             }, 500); // Match CSS transition duration

        });

        // Show summary logic
        showSummaryButton.addEventListener('click', () => {
            stepsContainer.style.display = 'none'; // Hide steps container
            summaryDiv.style.display = 'block'; // Show summary

            // Populate summary details
            const remainingBudget = initialBudget - totalCostAdded;
            const totalTimeNeeded = initialTime + totalTimeAdded;

            document.getElementById('summary-initial-budget').textContent = initialBudget.toLocaleString();
            document.getElementById('summary-total-cost-added').textContent = totalCostAdded.toLocaleString();
            const remainingBudgetSpan = document.getElementById('summary-remaining-budget');
            remainingBudgetSpan.textContent = remainingBudget.toLocaleString();

            // Add warning class if budget is negative
            if (remainingBudget < 0) {
                remainingBudgetSpan.classList.add('warning');
            } else {
                 remainingBudgetSpan.classList.remove('warning');
            }


            document.getElementById('summary-initial-time').textContent = initialTime;
            const totalTimeSpan = document.getElementById('summary-total-time-needed');
            totalTimeSpan.textContent = totalTimeNeeded.toFixed(1);

             // Add warning class if total time exceeds initial time
             if (totalTimeNeeded > initialTime) {
                 totalTimeSpan.classList.add('warning');
             } else {
                 totalTimeSpan.classList.remove('warning');
             }


            // Populate choices summary
            const populationChoice = choices['population'] || {};
            const samplingChoice = choices['sampling'] || {};
            const sequencingChoice = choices['sequencing'] || {};
            const sampleSizeChoice = choices['sample-size'] || {};

            document.getElementById('summary-population').textContent = populationChoice.population || '×œ× × ×‘×—×¨';
            document.getElementById('summary-sampling').textContent = `${samplingChoice.site || '×œ× × ×‘×—×¨ ××ª×¨'} (${samplingChoice.type || '×œ× × ×‘×—×¨×” ×©×™×˜×”'})`;
            document.getElementById('summary-invasiveness').textContent = samplingChoice.invasiveness || '×œ× ×™×“×•×¢';
            document.getElementById('summary-sequencing').textContent = sequencingChoice.value === '16S' ? '×¨×™×¦×•×£ 16S rRNA' : (sequencingChoice.value === 'shotgun' ? '×¨×™×¦×•×£ Shotgun Metagenomic' : '×œ× × ×‘×—×¨');
            document.getElementById('summary-resolution').textContent = sequencingChoice.resolution || '×œ× ×™×“×•×¢';
            document.getElementById('summary-sample-size').textContent = sampleSizeChoice.size || '×œ× × ×‘×—×¨';
            document.getElementById('summary-num-samples').textContent = sampleSizeChoice['num-samples'] || '0';
            document.getElementById('summary-power').textContent = sampleSizeChoice.power || '×œ× ×™×“×•×¢';

            // Populate limitations/data type based on choices and budget/time constraints
            const dataType = sequencingChoice.datatype || '×œ× × ×‘×—×¨ ×¡×•×’ ×¨×™×¦×•×£';
            let limitations = [];
            let insights = []; // Use insights for positive/neutral points


            insights.push(`×”×ª×•×›× ×™×ª ×©×œ×š ××ª××§×“×ª ×‘<strong>${populationChoice.population || '××•×›×œ×•×¡×™×™×” ×œ× ××•×’×“×¨×ª'}</strong>, ×ª×•×š ××™×¡×•×£ ×“×’×™××•×ª ×<strong>${samplingChoice.site || '××ª×¨ ×œ× ××•×’×“×¨'}</strong> ×‘×©×™×˜×ª <strong>${samplingChoice.type || '×œ× ××•×’×“×¨×ª'}</strong>.`);
            insights.push(`×ª× ×ª×— ××ª ×”×“×’×™××•×ª ×‘×××¦×¢×•×ª <strong>${sequencingChoice.value === '16S' ? '×¨×™×¦×•×£ 16S rRNA' : (sequencingChoice.value === 'shotgun' ? '×¨×™×¦×•×£ Shotgun Metagenomic' : '×˜×›× ×•×œ×•×’×™×” ×œ× ××•×’×“×¨×ª')}</strong>, ×©×ª×¡×¤×§ × ×ª×•× ×™× ××¡×•×’ <strong>${dataType}</strong>.`);
            insights.push(`×’×•×“×œ ×”××“×’× ×©× ×‘×—×¨ ×”×•× <strong>${sampleSizeChoice.size || '×œ× ××•×’×“×¨'}</strong> (${sampleSizeChoice['num-samples'] || '0'} ×“×’×™××•×ª), ×¢× ×›×•×— ×¡×˜×˜×™×¡×˜×™ <strong>${sampleSizeChoice.power || '×œ× ××•×’×“×¨'}</strong>.`);


            if (samplingChoice.invasiveness === '×¤×•×œ×©× ×™×ª') {
                limitations.push("<strong>×”×“×’×™××” ×¤×•×œ×©× ×™×ª (×‘×™×•×¤×¡×™×”)</strong>, ××” ×©×¢×©×•×™ ×œ×”×’×‘×™×œ ××ª ×’×•×“×œ ×”××“×’× ×‘×¤×•×¢×œ, ××™×™×§×¨ ××ª ×”×ª×”×œ×™×š, ×•×“×•×¨×© ××™×©×•×¨ ××ª×™ ××•×¨×›×‘ ×™×•×ª×¨.");
            }
            if (sequencingChoice.value === '16S') {
                limitations.push("<strong>×¨×™×¦×•×£ 16S ××¡×¤×§ ××™×“×¢ ×˜×§×¡×•× ×•××™ ×‘×œ×‘×“</strong> (××™ ×”×—×™×™×“×§×™× ×§×™×™××™× ×•×©×™×¢×•×¨×), ×œ×œ× ××™×“×¢ ×™×©×™×¨ ×•××¢××™×§ ×¢×œ ×”×ª×¤×§×™×“×™× ×”×¤×•× ×§×¦×™×•× ×œ×™×™× ××• ×”×¤×•×˜× ×¦×™××œ ×”××˜×‘×•×œ×™ ×©×œ ×”×§×”×™×œ×” ×”××™×§×¨×•×‘×™××œ×™×ª.");
            }
            if (sampleSizeChoice.power === '× ××•×š') {
                limitations.push("<strong>×’×•×“×œ ×”××“×’× ×§×˜×Ÿ</strong>, ××” ×©××’×‘×™×œ ××©××¢×•×ª×™×ª ××ª ×”×›×•×— ×”×¡×˜×˜×™×¡×˜×™ ×•×™×›×•×œ×ª ×’×™×œ×•×™ ×”×‘×“×œ×™× ×§×˜× ×™× ××• ×¢×“×™× ×™× ×‘×™×Ÿ ×§×‘×•×¦×•×ª ××—×§×¨, ×•××’×‘×™×¨ ××ª ×”×¡×™×›×•×Ÿ ×œ×ª×•×¦××•×ª ×©×’×•×™×•×ª (False Negative).");
            }
             if (sampleSizeChoice.power === '×‘×™× ×•× ×™') {
                 limitations.push("×’×•×“×œ ×”××“×’× ×‘×™× ×•× ×™. ×‘×¢×œ ×›×•×— ×¡×˜×˜×™×¡×˜×™ ×¡×‘×™×¨, ××š ×¢×œ×•×œ ×œ×¤×¡×¤×¡ ×”×‘×“×œ×™× ×§×˜× ×™× ×™×•×ª×¨ ××• ×“×•×¨×© ×’×•×“×œ ××¤×§×˜ ×’×“×•×œ ×™×•×ª×¨ ×›×“×™ ×œ×’×œ×•×ª ××•×‘×”×§×•×ª ×¡×˜×˜×™×¡×˜×™×ª.");
             }


            if (remainingBudget < 0) {
                 limitations.push(`<strong>×—×¨×™×’×” ××”×ª×§×¦×™×‘!</strong> ×¢×œ×•×ª ×”×ª×•×›× ×™×ª ($${totalCostAdded.toLocaleString()}) ×’×‘×•×”×” ××”×ª×§×¦×™×‘ ×©×”×•×§×¦×” ($${initialBudget.toLocaleString()}) ×‘×—×¨×™×’×” ×©×œ $${Math.abs(remainingBudget).toLocaleString()}. ×”×ª×•×›× ×™×ª ×›×¤×™ ×©×ª×•×›× × ×” ××™× ×” × ×™×ª× ×ª ×œ×‘×™×¦×•×¢ ×¢× ×”××©××‘×™× ×”×–××™× ×™×.`);
            } else if (remainingBudget > 0) {
                 insights.push(`×”×ª×•×›× ×™×ª ×¢×•××“×ª ×‘×ª×§×¦×™×‘ ×¢× ×™×ª×¨×” ×©×œ $${remainingBudget.toLocaleString()}.`);
            } else {
                 insights.push(`×”×ª×•×›× ×™×ª ×× ×¦×œ×ª ××ª ×”×ª×§×¦×™×‘ ×‘××œ×•××• ($${totalCostAdded.toLocaleString()}).`);
            }

             if (totalTimeNeeded > initialTime) {
                 limitations.push(`<strong>×–××Ÿ ×”××—×§×¨ ×”× ×“×¨×© ××¨×•×š ××”×–××Ÿ ×©×”×•×§×¦×‘!</strong> ×”×ª×•×›× ×™×ª ×›×¤×™ ×©×ª×•×›× × ×” ×“×•×¨×©×ª ×›-${totalTimeNeeded.toFixed(1)} ×—×•×“×©×™× ×œ×¢×•××ª ${initialTime} ×©×”×•×§×¦×‘×•. ×–×” ×¢×©×•×™ ×œ×¢×›×‘ ××ª ×”×©×œ××ª ×”××©×™××”.`);
             } else if (totalTimeNeeded <= initialTime) {
                 insights.push(`×”×ª×•×›× ×™×ª ×¢×•××“×ª ×‘×œ×•×— ×”×–×× ×™× ×©×”×•×§×¦×‘ (${initialTime} ×—×•×“×©×™×).`);
             }


            document.getElementById('summary-data-type').textContent = dataType;
            const limitationsDiv = document.getElementById('summary-limitations');

            let summaryHtml = "";
            // Add insights first
            summaryHtml += "<h4>××¡×§× ×•×ª ××¨×›×–×™×•×ª:</h4><ul>";
            insights.forEach(ins => { summaryHtml += `<li>${ins}</li>`; });
            summaryHtml += "</ul>";

            // Add limitations if any
            if (limitations.length > 0) {
                summaryHtml += "<h4>ğŸš§ ××ª×’×¨×™× ×•××’×‘×œ×•×ª ×¤×•×˜× ×¦×™××œ×™×™×:</h4><ul>";
                limitations.forEach(lim => { summaryHtml += `<li>${lim}</li>`; });
                summaryHtml += "</ul>";
            } else {
                 if (remainingBudget >= 0 && totalTimeNeeded <= initialTime) {
                      summaryHtml += "<p>ğŸ‘ ×”×ª×•×›× ×™×ª ×©×œ×š × ×¨××™×ª ×™×©×™××” ××‘×—×™× ×ª ××©××‘×™× ×•×œ×•×— ×–×× ×™×, ×•×”×‘×—×™×¨×•×ª ×©× ×¢×©×• ×ª×•×××•×ª ×–×• ××ª ×–×•.</p>";
                 } else {
                      summaryHtml += "<p>×©×™×§×•×œ×™× × ×•×¡×¤×™× ×™×™×ª×›× ×• ×‘×”×ª×× ×œ××˜×¨×•×ª ×”××“×•×™×§×•×ª ×©×œ ×”××—×§×¨.</p>";
                 }
            }

            limitationsDiv.innerHTML = summaryHtml;

             // Scroll to the summary
             summaryDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });

        });

        // Explanation toggle logic
        explanationToggle.addEventListener('click', () => {
            const isHidden = explanationDiv.style.display === 'none';
            // Toggle display with basic fade effect
            if (isHidden) {
                explanationDiv.style.opacity = '0';
                explanationDiv.style.display = 'block';
                setTimeout(() => { explanationDiv.style.opacity = '1'; }, 10); // Small delay for transition
            } else {
                 explanationDiv.style.opacity = '0';
                 setTimeout(() => { explanationDiv.style.display = 'none'; }, 300); // Hide after fade out
            }

            explanationToggle.textContent = isHidden ? '×”×¡×ª×¨ ×”×¡×‘×¨ â¬†ï¸' : '×”×¦×’ ×”×¡×‘×¨ ×¢×œ ××™×§×¨×•×‘×™×•× ×•××—×§×¨ â¬‡ï¸';
        });

        // Initial button state check
        updateNextButtonState();
    });
</script>