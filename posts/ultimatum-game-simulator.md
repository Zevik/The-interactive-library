---
title: "×”××©×—×§ ×”××•×œ×˜×™××˜×™×‘×™: ×¡×™××•×œ×˜×•×¨ ×—×œ×•×§×” ×•×”×•×’× ×•×ª"
english_slug: ultimatum-game-simulator
category: "××“×¢×™ ×”×—×‘×¨×” / ×›×œ×›×œ×” ×”×ª× ×”×’×•×ª×™×ª"
tags: [××©×—×§×™×, ×§×‘×œ×ª ×”×—×œ×˜×•×ª, ×”×•×’× ×•×ª, ×©×™×ª×•×£ ×¤×¢×•×œ×”, ×¤×¡×™×›×•×œ×•×’×™×”, × ×™×¡×•×™]
---
# ×”××©×—×§ ×”××•×œ×˜×™××˜×™×‘×™: ×¡×™××•×œ×˜×•×¨ ×—×œ×•×§×” ×•×”×•×’× ×•×ª

**×”×§×“××” ×œ×¤×¢×•×œ×”:** ×“××™×™× ×• ×©××ª× ×¢×•××“×™× ×‘×¤× ×™ ×“×™×œ××” ××¨×ª×§×ª: ××“× ××—×“ ××—×–×™×§ ×‘×¡×›×•× ×›×¡×£ ×•×¦×¨×™×š ×œ×”×¦×™×¢ ×—×œ×§ ××× ×• ×œ××“× ××—×¨. ×”××“× ×”×©× ×™ ×œ× ×™×›×•×œ ×œ×”×ª××§×— - ×¨×§ ×œ×”×—×œ×™×˜ ×× ×œ×§×‘×œ ××ª ×”×”×¦×¢×” ××• ×œ×“×—×•×ª ××•×ª×” ×œ×—×œ×•×˜×™×Ÿ. ×× ×”×”×¦×¢×” ××ª×§×‘×œ×ª, ×©× ×™×”× ××§×‘×œ×™× ××ª ×”×—×œ×§×™× ×©×¡×•×›××•. ×× ×”×™× × ×“×—×™×ª, ××£ ××—×“ ×œ× ××§×‘×œ ×›×œ×•×. ××™×š ×ª×¤×¢×œ×• ×›×©××ª× ××¦×™×¢×™×? ×•××” ×ª×¢×©×• ×›×©×™×¦×™×¢×• ×œ×›× ×”×¦×¢×” ×©× ×¨××™×ª "×œ× ×”×•×’× ×ª"? ×”×›×™×¨×• ××ª **××©×—×§ ×”××•×œ×˜×™××˜×•×** - ×›×œ×™ ×¢×•×¦××ª×™ ×œ×—×©×™×¤×ª ×”××ª×— ×‘×™×Ÿ ×¨×¦×™×•× ×œ×™×•×ª ×§×¨×” ×œ×‘×™×Ÿ ×”×¨×¦×•×Ÿ ×œ×”×•×’× ×•×ª. ×”×¡×™××•×œ×˜×•×¨ ×”×–×” ××–××™×Ÿ ××ª×›× ×œ×¦×œ×•×œ ×œ×œ×‘ ×”×”×ª×œ×‘×˜×•×ª ×”×–×•, ×•×œ×”×‘×™×Ÿ ××™×š ×”×ª× ×”×’×•×ª "×œ× ×¨×¦×™×•× ×œ×™×ª" ×œ×›××•×¨×” ×™×›×•×œ×” ×œ×”×©×¤×™×¢ ×“×¨××˜×™×ª ×¢×œ ×”×ª×•×¦××•×ª.

<div class="ultimatum-game-container">
    <div class="game-header">
        <i class="icon-money"></i>
        <h2>×©×—×§×• ×¢× ×”×—×•×§×™×</h2>
        <i class="icon-scale"></i>
    </div>

    <div class="settings game-section">
        <div class="setting-item">
            <label for="total-amount">×”××•×¦×¨ ×œ×—×œ×•×§×” (×‘×©×§×œ×™× ×—×“×©×™×):</label>
            <input type="number" id="total-amount" value="100" min="1" step="1" class="game-input">
        </div>
        <div class="setting-item">
            <label for="num-rounds">×›××” ×¡×‘×‘×™ ××©×—×§ × ×“××”?:</label>
            <input type="number" id="num-rounds" value="100" min="10" step="10" class="game-input">
        </div>
        <div class="setting-item">
            <label for="min-acceptance">×¡×£ ×”×”×•×’× ×•×ª ×©×œ ×”××§×‘×œ (××—×•×–×™× - ××” ×”××™× ×™××•× ×©×”×•× ×™×§×‘×œ?):</label>
            <input type="number" id="min-acceptance" value="30" min="0" max="100" step="5" class="game-input">
        </div>
        <button id="start-simulation" class="game-button">
            <i class="icon-play"></i>
            <span>×”×¤×¢×œ ××ª ×”×¡×™××•×œ×¦×™×” ×”××¨×ª×§×ª!</span>
        </button>
    </div>

    <div class="simulation-results game-section">
        <div class="game-header">
             <i class="icon-chart"></i>
            <h2>×ª×•×¦××•×ª ×”×¡×™××•×œ×¦×™×” ×”×’×“×•×œ×”</h2>
            <i class="icon-trophy"></i>
        </div>

        <div class="results-summary">
            <p>×¡×‘×‘×™× ×©×©×•×—×§×•: <span id="rounds-executed" class="highlight-value">0</span> ××ª×•×š <span id="total-sim-rounds" class="total-value">0</span></p>
            <div class="progress-bar-container">
                <div class="progress-bar" id="simulation-progress"></div>
            </div>
            <p>×”×¦×¢×•×ª ×©×–×›×• ×œ×”×¡×›××”: <span id="accepted-count" class="highlight-value accepted">0</span> <i class="icon-accepted"></i></p>
            <p>×”×¦×¢×•×ª ×©× ×“×—×• ×‘×‘×•×–: <span id="rejected-count" class="highlight-value rejected">0</span> <i class="icon-rejected"></i></p>
            <p>××—×•×– ×”×”×¡×›××” ×”×›×•×œ×œ: <span id="acceptance-rate" class="highlight-value accepted">0%</span></p>
            <p>×¡×›×•× ×›×•×œ×œ ×©×—×•×œ×§ ×‘×¤×•×¢×œ: <span id="total-shared" class="highlight-value total">0</span> ×©"×— <i class="icon-money-bag"></i></p>
        </div>

        <div class="results-visuals">
             <h3>×¤×™×–×•×¨ ×”×”×¦×¢×•×ª ×•×ª×’×•×‘×•×ª ×”××§×‘×œ×™×</h3>
             <p class="visuals-description">×¦×™×¨ ×–×” ××¦×™×’ ××ª ×”×”×¦×¢×•×ª ×©×©×—×§×Ÿ 1 ×”×¦×™×¢ ×œ××§×‘×œ (×‘××—×•×–×™×), ×•××™×š ×”××§×‘×œ ×”×’×™×‘ ×œ×›×œ ×˜×•×•×— ×”×¦×¢×•×ª ×‘×”×ª×× ×œ"×¡×£ ×”×”×•×’× ×•×ª" ×©×”×’×“×¨×ª×.</p>
             <div class="offer-buckets-container" id="offer-buckets-container">
                 <!-- Buckets will be generated by JS -->
                 <div class="bucket-label" style="width: 10%;">0-9%</div>
                 <div class="bucket-label" style="width: 10%;">10-19%</div>
                 <div class="bucket-label" style="width: 10%;">20-29%</div>
                 <div class="bucket-label" style="width: 10%;">30-39%</div>
                 <div class="bucket-label" style="width: 10%;">40-49%</div>
                 <div class="bucket-label" style="width: 10%;">50-59%</div>
                 <div class="bucket-label" style="width: 10%;">60-69%</div>
                 <div class="bucket-label" style="width: 10%;">70-79%</div>
                 <div class="bucket-label" style="width: 10%;">80-89%</div>
                 <div class="bucket-label" style="width: 10%;">90-100%</div>
                 <div class="offer-buckets-bar-container">
                     <!-- Offer bars will be injected here -->
                 </div>
             </div>
         </div>


        <div class="results-graph">
            <h3>×¡×™×›×•× ×•×™×–×•××œ×™: ×”×¦×¢×•×ª ××•×œ ×ª×•×¦××•×ª</h3>
            <canvas id="resultsChart"></canvas>
        </div>
    </div>
</div>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Varela+Round&display=swap');

    /* Basic Reset/Base */
    .ultimatum-game-container * {
        box-sizing: border-box;
    }

    .ultimatum-game-container {
        font-family: 'Varela Round', sans-serif;
        max-width: 760px; /* Slightly wider */
        margin: 30px auto;
        padding: 30px; /* More padding */
        background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%); /* Gentle gradient */
        border-radius: 15px; /* More rounded corners */
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); /* Deeper shadow */
        text-align: right;
        direction: rtl;
        color: #212529; /* Darker text for contrast */
        overflow: hidden; /* Clear floats/margins */
    }

    .game-header {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 25px;
        color: #007bff; /* Primary blue */
    }

    .game-header h2 {
        margin: 0 15px;
        font-size: 1.8em; /* Larger heading */
        font-weight: bold;
        color: #0056b3; /* Slightly darker blue */
        text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
    }

    .game-header i {
        font-size: 1.5em;
        color: #007bff;
        /* Simple Icons (replace with real icons if available in production env) */
    }
     .icon-money::before { content: 'ğŸ’°'; }
     .icon-scale::before { content: 'âš–ï¸'; }
     .icon-chart::before { content: 'ğŸ“Š'; }
     .icon-trophy::before { content: 'ğŸ†'; }
     .icon-play::before { content: 'â–¶ï¸'; }
     .icon-accepted::before { content: 'âœ…'; }
     .icon-rejected::before { content: 'âŒ'; }
     .icon-money-bag::before { content: 'ğŸ’¸'; }


    .game-section {
        background-color: #ffffff; /* White background for sections */
        padding: 25px; /* More padding */
        border-radius: 10px; /* Rounded corners */
        margin-bottom: 25px; /* Space between sections */
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08); /* Section shadow */
        border: 1px solid #e9ecef; /* Subtle border */
    }

    .settings .setting-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px; /* More space */
        padding-bottom: 15px;
        border-bottom: 1px dashed #dee2e6; /* Dashed border */
    }

    .settings .setting-item:last-child {
        margin-bottom: 0;
        border-bottom: none;
        padding-bottom: 0;
    }

    .setting-item label {
        flex-grow: 1;
        margin-left: 15px; /* More space */
        font-weight: bold;
        color: #495057; /* Dark gray */
        font-size: 1.1em;
    }

    .game-input {
        width: 90px; /* Slightly wider input */
        padding: 10px 12px; /* More padding */
        border: 1px solid #ced4da;
        border-radius: 6px; /* Rounded input */
        text-align: center;
        font-size: 1em;
        transition: border-color 0.3s ease, box-shadow 0.3s ease;
        background-color: #f8f9fa; /* Light background */
    }

    .game-input:focus {
        border-color: #007bff;
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
        outline: none;
        background-color: #fff;
    }

    /* Remove arrow buttons for number input */
    .game-input::-webkit-outer-spin-button,
    .game-input::-webkit-inner-spin-button {
        -webkit-appearance: none;
        margin: 0;
    }
     .game-input {-moz-appearance: textfield;} /* Firefox */


    .game-button {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        padding: 15px; /* More padding */
        background-color: #28a745; /* Green button */
        color: white;
        border: none;
        border-radius: 8px; /* More rounded */
        font-size: 1.2em; /* Larger text */
        font-weight: bold;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.15s ease, opacity 0.3s ease;
        margin-top: 25px; /* More space */
        box-shadow: 0 4px 10px rgba(40, 167, 69, 0.2);
    }

    .game-button i {
        margin-left: 10px;
        font-size: 1.3em;
    }

    .game-button:hover:not(:disabled) {
        background-color: #218838; /* Darker green on hover */
        box-shadow: 0 6px 12px rgba(40, 167, 69, 0.3);
    }

    .game-button:active:not(:disabled) {
        transform: scale(0.98);
    }

    .game-button:disabled {
        background-color: #6c757d; /* Gray when disabled */
        cursor: not-allowed;
        opacity: 0.7;
        box-shadow: none;
    }


    /* Results Summary Styles */
    .results-summary p {
        margin-bottom: 12px; /* More space */
        font-size: 1.15em; /* Slightly larger text */
        color: #495057; /* Dark gray */
        display: flex;
        align-items: center;
        justify-content: space-between; /* Align text and value/icon */
    }

    .results-summary p:last-child {
         margin-bottom: 0;
    }

    .results-summary p span {
        font-weight: bold;
        margin-right: 10px; /* Space between value and icon */
    }

    .results-summary .highlight-value {
        color: #007bff; /* Primary blue for values */
    }
    .highlight-value.accepted { color: #28a745; } /* Green for accepted */
    .highlight-value.rejected { color: #dc3545; } /* Red for rejected */
    .highlight-value.total { color: #17a2b8; } /* Teal for total shared */


    /* Progress Bar */
    .progress-bar-container {
        width: 100%;
        background-color: #e9ecef;
        border-radius: 5px;
        margin-top: 15px;
        margin-bottom: 20px;
        overflow: hidden;
        height: 15px; /* Thicker bar */
        box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
    }

    .progress-bar {
        height: 100%;
        width: 0%;
        background-color: #007bff; /* Primary blue */
        border-radius: 5px;
        transition: width 0.4s ease-in-out; /* Smooth animation */
    }

    /* Visual Buckets */
    .results-visuals {
        margin-top: 25px;
        border-top: 1px dashed #dee2e6;
        padding-top: 25px;
        text-align: center;
    }

    .results-visuals h3 {
        color: #0056b3;
        margin-bottom: 10px;
        font-size: 1.3em;
    }
    .visuals-description {
        font-size: 0.95em;
        color: #5a6268;
        margin-bottom: 20px;
        line-height: 1.5;
    }

    .offer-buckets-container {
        display: flex;
        flex-wrap: wrap; /* Allow wrapping if needed */
        width: 100%;
        margin-bottom: 15px;
        position: relative; /* Needed for absolute positioning of bars */
        min-height: 150px; /* Ensure space */
        padding-top: 20px; /* Space for labels */
        border-bottom: 1px solid #ced4da;
    }

     .bucket-label {
        position: absolute;
        top: 0;
        height: 20px;
        font-size: 0.8em;
        color: #5a6268;
        text-align: center;
        transform: translateX(50%); /* Center label above the bucket start */
     }
     .bucket-label:first-child { transform: translateX(0%); text-align: right; }
     .bucket-label:last-child { transform: translateX(-50%); text-align: left;}


     .offer-buckets-bar-container {
         position: absolute;
         bottom: 0;
         left: 0;
         right: 0;
         display: flex;
         align-items: flex-end; /* Align bars to the bottom */
         height: 100%;
         padding-bottom: 0px; /* Space below bars */
     }


    .offer-bucket-bar {
        flex-grow: 1;
        width: 10%; /* Base width */
        display: flex;
        flex-direction: column; /* Stack accepted/rejected */
        justify-content: flex-end; /* Stack from bottom */
        height: 100%; /* Max height */
        margin: 0 1px; /* Small gap between buckets */
        background-color: #e9ecef; /* Background for the bucket column */
        border-top-left-radius: 3px;
        border-top-right-radius: 3px;
        overflow: hidden; /* Hide overflow during animation */
    }
    .offer-bucket-bar:first-child { margin-right: 0; }
     .offer-bucket-bar:last-child { margin-left: 0; }

    .bucket-segment {
        width: 100%; /* Fill bucket width */
        transition: height 0.4s ease-out; /* Animate height */
    }

    .bucket-segment.accepted {
        background-color: rgba(40, 167, 69, 0.7); /* Greenish with alpha */
    }

    .bucket-segment.rejected {
        background-color: rgba(220, 53, 69, 0.7); /* Reddish with alpha */
    }

    /* Chart Styles */
    .results-graph {
        margin-top: 25px;
        border-top: 1px dashed #dee2e6;
        padding-top: 25px;
        text-align: center;
    }

    .results-graph h3 {
        color: #0056b3;
        margin-bottom: 15px;
        font-size: 1.3em;
    }

    #resultsChart {
        width: 100% !important;
        max-height: 350px; /* Control chart height */
        min-height: 250px;
    }

    /* Explanation Toggle Button */
    #toggle-explanation-button {
        display: block;
        width: fit-content;
        margin: 20px auto;
        padding: 10px 25px; /* More padding */
        background-color: #17a2b8; /* Teal color */
        color: white;
        border: none;
        border-radius: 25px; /* Pill shape */
        font-size: 1.1em;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.1s ease;
        box-shadow: 0 2px 8px rgba(23, 162, 184, 0.3);
        font-family: 'Varela Round', sans-serif; /* Consistent font */
    }

    #toggle-explanation-button:hover {
        background-color: #138496; /* Darker teal */
        box-shadow: 0 4px 10px rgba(23, 162, 184, 0.4);
    }

    #toggle-explanation-button:active {
        transform: scale(0.98);
    }

    /* Explanation Content */
    .explanation-content {
        display: none; /* Hidden by default */
        margin-top: 25px;
        padding: 25px;
        background-color: #e9ecef; /* Light background */
        border-radius: 10px;
        line-height: 1.7; /* Improved readability */
        color: #343a40; /* Darker text */
        text-align: right;
        direction: rtl;
        box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        border: 1px solid #ced4da;
    }

    .explanation-content h2 {
        color: #0056b3;
        margin-top: 0; /* No top margin for first heading */
        margin-bottom: 15px;
        font-size: 1.6em;
        text-align: center;
    }
     .explanation-content h3 {
        color: #007bff;
        margin-top: 20px; /* Space before subheadings */
        margin-bottom: 10px;
        font-size: 1.3em;
     }

    .explanation-content p {
        margin-bottom: 15px;
    }

    .explanation-content strong {
        color: #0056b3; /* Blue for emphasis */
        font-weight: bold;
    }

    .explanation-content ol, .explanation-content ul {
        margin-bottom: 15px;
        padding-right: 20px;
    }
    .explanation-content li {
        margin-bottom: 8px;
    }


</style>

<button id="toggle-explanation-button">××” ×–×” ×‘×¢×¦×? ×”×¡×‘×¨ ×¢×œ ×”××©×—×§!</button>

<div class="explanation-content">
    <h2>×”×¡×‘×¨ ××•×¨×—×‘: ××©×—×§ ×”××•×œ×˜×™××˜×•×</h2>
    <p>××©×—×§ ×”××•×œ×˜×™××˜×•× ×”×•× ××—×“ ×”×›×œ×™× ×”××¨×›×–×™×™× ×‘×›×œ×›×œ×” ×”×ª× ×”×’×•×ª×™×ª ×•×‘×¤×¡×™×›×•×œ×•×’×™×” ×—×‘×¨×ª×™×ª ×œ×—×§×¨ ×§×‘×œ×ª ×”×—×œ×˜×•×ª ×‘×ª× ××™ ××™-×•×“××•×ª, ×‘××™×•×—×“ ×‘×”×§×©×¨ ×©×œ ××©× ×•××ª×Ÿ ×•×—×œ×•×§×ª ××©××‘×™×. ×”×•× ×—×•×©×£ ×‘×¦×•×¨×” ×“×¨××˜×™×ª ×›×™×¦×“ ×©×™×§×•×œ×™× ×©×œ **×”×•×’× ×•×ª** ×•×¨×¦×•×Ÿ ×œ×”×¢× ×™×© ×—×•×¡×¨ ×”×•×’× ×•×ª ××ª× ×’×©×™× ×¢× ×”×¨×¦×™×•× ×œ×™×•×ª ×”×›×œ×›×œ×™×ª ×”×˜×”×•×¨×”.</p>

    <h3>××›× ×™×§×ª ×”××©×—×§ ×”×‘×¡×™×¡×™×ª:</h3>
    <p>×”××©×—×§ ××¢×¨×‘ ×©× ×™ ×©×—×§× ×™× ×× ×•× ×™××™×™× (×œ×¨×•×‘) ×•×¡×›×•× ×›×¡×£ ××•×’×“×¨ ××¨××©:</p>
    <ol>
        <li><strong>×”××¦×™×¢ (×©×—×§×Ÿ 1):</strong> ××§×‘×œ ××ª ×›×œ ×”×¡×›×•× ×•×¦×¨×™×š ×œ×”×¦×™×¢ ×—×œ×§ ×›×œ×©×”×• ××× ×• ×œ×©×—×§×Ÿ ×”×©× ×™. ×”×”×¦×¢×” ×™×›×•×œ×” ×œ×”×™×•×ª ×›×œ ×¡×›×•× ×‘×™×Ÿ 0 ×œ×‘×™×Ÿ ×”×¡×›×•× ×”××œ×.</li>
        <li><strong>×”××§×‘×œ (×©×—×§×Ÿ 2):</strong> ××§×‘×œ ××ª ×”×”×¦×¢×” ×•×™×›×•×œ ×¨×§ ×œ×•××¨ "×›×Ÿ" ××• "×œ×".
            <ul>
                <li>×× ×”××§×‘×œ ××•××¨ **"×›×Ÿ"**: ×”×”×¦×¢×” ××ª×§×‘×œ×ª, ×•×”×›×¡×£ ××ª×—×œ×§ ×œ×¤×™ ×”×”×¦×¢×” ×©×œ ×©×—×§×Ÿ 1.</li>
                <li>×× ×”××§×‘×œ ××•××¨ **"×œ×"**: ×”×”×¦×¢×” × ×“×—×™×ª, ×•××£ ××—×“ ××”×©×—×§× ×™× ×œ× ××§×‘×œ ×›×œ×•× â€“ ×”×›×¡×£ ×”×•×œ×š "×œ××™×‘×•×“".</li>
            </ul>
        </li>
    </ol>
    <p>×—×©×•×‘: ×”××©×—×§ ××©×•×—×§ ×‘×“×¨×š ×›×œ×œ **×¨×§ ×¤×¢× ××—×ª**. ×–×” ××•× ×¢ ×©×™×§×•×œ×™× ×©×œ ××•× ×™×˜×™×Ÿ ××• ×ª×’××•×œ ×‘×¡×‘×‘×™× ×¢×ª×™×“×™×™×.</p>

    <h3>×”×”×ª× ×’×©×•×ª: ×¨×¦×™×•× ×œ×™×•×ª ××•×œ ×”×ª× ×”×’×•×ª</h3>
    <p>××” ×”×™×™×ª×” ×”×ª×•×¦××” ×× ×©× ×™ ×”×©×—×§× ×™× ×”×™×• "×¨×¦×™×•× ×œ×™×™×" ×œ×—×œ×•×˜×™×Ÿ ×•×× ×•×›×™×™×, ×•×©×•××¤×™× ×¨×§ ×œ××§×¡× ××ª ×¨×•×•×—× ×”×›×¡×¤×™? ×©×—×§×Ÿ 1 ×”×™×” ××¦×™×¢ ×œ×©×—×§×Ÿ 2 ××ª ×”×¡×›×•× ×”×§×˜×Ÿ ×‘×™×•×ª×¨ ×”××¤×©×¨×™ (×œ××©×œ, ×©×§×œ ××—×“), ×•×©×—×§×Ÿ 2 ×”×™×” ××§×‘×œ ×›×œ ×”×¦×¢×” ×©×’×“×•×œ×” ×××¤×¡. ××“×•×¢? ×›×™ ××¤×™×œ×• ×©×§×œ ××—×“ ×˜×•×‘ ×™×•×ª×¨ ××œ× ×›×œ×•×.</p>
    <p>××‘×œ, × ×™×¡×•×™×™× ×©×•×‘ ×•×©×•×‘ ××¨××™× ×©×–×• **×œ×** ×”×”×ª× ×”×’×•×ª ×”×× ×•×©×™×ª ×”××•×¤×™×™× ×™×ª. ×¨×•×‘ ×”××¦×™×¢×™× ××¦×™×¢×™× ×¡×›×•××™× ××©××¢×•×ª×™×™× ×™×•×ª×¨ (×œ×¨×•×‘ ×‘×™×Ÿ 40% ×œ-50%), ×•×¨×•×‘ ×”××§×‘×œ×™× ×“×•×—×™× ×”×¦×¢×•×ª ×©× ×—×©×‘×•×ª × ××•×›×•×ª ××“×™ ××• "×œ× ×”×•×’× ×•×ª" (×‘×“×¨×š ×›×œ×œ ×”×¦×¢×•×ª ×”× ××•×›×•×ª ×-20%-30% × ×“×—×•×ª ×‘×©×™×¢×•×¨ ×’×‘×•×”). ×× ×©×™× ××•×›× ×™× ×œ×©×œ× ××—×™×¨ (×œ×•×•×ª×¨ ×¢×œ ×›×¡×£) ×›×“×™ ×œ×”×¢× ×™×© ×”×ª× ×”×’×•×ª ×©×”× ×ª×•×¤×¡×™× ×›××§×¤×—×ª ××• ×‘×œ×ª×™ ×”×•×’× ×ª.</p>

    <h3>××™×š ×”×¡×™××•×œ×˜×•×¨ ×¢×•×–×¨ ×œ×”×‘×™×Ÿ?</h3>
    <p>×”×¡×™××•×œ×˜×•×¨ ×”×–×” ×××¤×©×¨ ×œ×›× ×œ×”×’×“×™×¨ ××ª "×¡×£ ×”×”×•×’× ×•×ª" ×”××™× ×™××œ×™ ×©×œ ×”××§×‘×œ (×”×¡×›×•× ×”× ××•×š ×‘×™×•×ª×¨, ×‘××—×•×–×™×, ×©×”××§×‘×œ ×‘×¡×™××•×œ×¦×™×” **×©×œ×›×** ×™×¡×›×™× ×œ×§×‘×œ). ×œ××—×¨ ××›×Ÿ, ×”×•× ××“××” ××¡×¤×¨ ×¨×‘ ×©×œ ×¡×‘×‘×™× ×©×‘×”× ×©×—×§×Ÿ 1 (××™×•×¦×’ ×¢×œ ×™×“×™ ××—×•×œ×œ ×”×¦×¢×•×ª ××§×¨××™) ××¦×™×¢ ×—×œ×•×§×•×ª ×©×•× ×•×ª. ××ª× ×¨×•××™× ×‘×–××Ÿ ×××ª (×•×‘×¡×™×›×•× ×¡×•×¤×™) ×›××” ×”×¦×¢×•×ª ××ª×§×‘×œ×•×ª ×•×›××” × ×“×—×•×ª, ×•××™×š ×–×” ××©×¤×™×¢ ×¢×œ ×¡×š ×”×›×¡×£ ×©××—×•×œ×§ ×‘×¤×•×¢×œ.</p>
    <p>×–×” ×××—×™×© ×•×™×–×•××œ×™×ª ××ª ×”×¨×¢×™×•×Ÿ ×”××¨×›×–×™: ×›××©×¨ ×”××§×‘×œ×™× ××•× ×¢×™× ×’× ××©×™×§×•×œ×™ ×”×•×’× ×•×ª (×•×œ× ×¨×§ ××¨×•×•×— ×›×¡×¤×™ ×˜×”×•×¨), ×”× ×™×•×¦×¨×™× ×× ×’× ×•×Ÿ ×©×××œ×¥ ×’× ××¦×™×¢×™× "×¨×¦×™×•× ×œ×™×™×" ×œ×”×¦×™×¢ ×”×¦×¢×•×ª × ×“×™×‘×•×ª ×™×•×ª×¨, ×¤×©×•×˜ ×›×™ ××—×¨×ª ×”×”×¦×¢×•×ª ×©×œ×”× ×™×™×“×—×• ×•×”× ×œ× ×™×§×‘×œ×• ×›×œ×•×.</p>

    <h3>×”×©×œ×›×•×ª ××”×¢×•×œ× ×”×××™×ª×™</h3>
    <p>××©×—×§ ×”××•×œ×˜×™××˜×•× ×—×•×©×£ ××ª ×›×•×—×Ÿ ×©×œ × ×•×¨××•×ª ×—×‘×¨×ª×™×•×ª ×•×¨×’×©×•×ª ×× ×•×©×™×™× ×‘×¢×™×¦×•×‘ ×”×—×œ×˜×•×ª ×›×œ×›×œ×™×•×ª ×•×—×‘×¨×ª×™×•×ª. ×”×•× ×¨×œ×•×•× ×˜×™ ×œ××’×•×•×Ÿ ×ª×—×•××™×:</p>
    <ul>
        <li>**××©× ×•××ª×Ÿ:** ×”×‘× ×ª × ×§×•×“×ª ×”××‘×˜ ×©×œ ×”×¦×“ ×”×©× ×™ ×•××” ×™×™×—×©×‘ ×‘×¢×™× ×™×• ×›"×”×•×’×Ÿ" ×”×™× ×§×¨×™×˜×™×ª ×œ×”×¦×œ×—×”.</li>
        <li>**×—×œ×•×§×ª ××©××‘×™× ×¦×™×‘×•×¨×™×™×:** ××—××•×ª ×—×‘×¨×ª×™×•×ª ×¨×‘×•×ª × ×•×‘×¢×•×ª ××ª×—×•×©×” ×©×œ ×—×•×¡×¨ ×”×•×’× ×•×ª ×‘×—×œ×•×§×ª ×”×¢×•×©×¨ ××• ×”××©××‘×™×.</li>
        <li>**×©×•×§ ×”×¢×‘×•×“×”:** ××©×›×•×¨×•×ª ×•×”×˜×‘×•×ª ×©××™× ×Ÿ × ×ª×¤×¡×•×ª ×›×”×•×’× ×•×ª ×¢×œ×•×œ×•×ª ×œ×”×•×‘×™×œ ×œ×—×•×¡×¨ ×©×‘×™×¢×•×ª ×¨×¦×•×Ÿ, ×©×‘×™×ª×•×ª, ×•×¢×–×™×‘×ª ×¢×•×‘×“×™×, ×’× ×× ×”×©×›×¨ "×˜×›× ×™×ª" ×’×‘×•×” ××¡×¤×™×§ ×œ×—×™×™×.</li>
        <li>**×™×—×¡×™× ×‘×™× ×œ××•××™×™×:** ×”×¡×›××™× ×‘×™×Ÿ ××“×™× ×•×ª ×œ×¢×™×ª×™× ×§×¨×•×‘×•×ª ×ª×œ×•×™×™× ×‘×ª×¤×™×¡×ª ×”×”×•×’× ×•×ª ×©×œ ×”×—×œ×•×§×” ××• ×”×”×¡×“×¨.</li>
    </ul>
    <p>×”××©×—×§ ××¨××” ×©×× ×©×™× ×”× ×™×¦×•×¨×™× ×—×‘×¨×ª×™×™× ×©××’×™×‘×™× ×œ× ×¨×§ ×œ×ª××¨×™×¦×™× ×›×¡×¤×™×™×, ××œ× ×’× ×œ×ª×¤×™×¡×•×ª ×©×œ ×¦×“×§ ×•×”×•×’× ×•×ª, ×•××•×›× ×™× "×œ×”×¢× ×™×©" ××ª ××™ ×©×¤×•×’×¢ ×‘×ª×¤×™×¡×•×ª ×”×œ×œ×•, ×’× ×‘××—×™×¨ ××™×©×™.</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const totalAmountInput = document.getElementById('total-amount');
        const numRoundsInput = document.getElementById('num-rounds');
        const minAcceptanceInput = document.getElementById('min-acceptance');
        const startSimulationButton = document.getElementById('start-simulation');
        const roundsExecutedSpan = document.getElementById('rounds-executed');
        const totalSimRoundsSpan = document.getElementById('total-sim-rounds');
        const acceptedCountSpan = document.getElementById('accepted-count');
        const rejectedCountSpan = document.getElementById('rejected-count');
        const acceptanceRateSpan = document.getElementById('acceptance-rate');
        const totalSharedSpan = document.getElementById('total-shared');
        const resultsChartCanvas = document.getElementById('resultsChart').getContext('2d');
        const toggleExplanationButton = document.getElementById('toggle-explanation-button');
        const explanationContent = document.querySelector('.explanation-content');
        const simulationProgressBar = document.getElementById('simulation-progress');
        const offerBucketsBarContainer = document.querySelector('.offer-buckets-bar-container');


        let simulationChart;
        const offerBucketRanges = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 101]; // Ranges for buckets (0-9, 10-19, ..., 90-100)

        // Initialize Chart
        const createChart = (labels, acceptedData, rejectedData) => {
            if (simulationChart) {
                simulationChart.destroy();
            }
            simulationChart = new Chart(resultsChartCanvas, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: '×”×¦×¢×•×ª ×©×”×ª×§×‘×œ×• âœ…',
                            data: acceptedData,
                            backgroundColor: 'rgba(40, 167, 69, 0.8)', // Greenish
                            borderColor: 'rgba(40, 167, 69, 1)',
                            borderWidth: 1,
                            borderRadius: 4
                        },
                        {
                            label: '×”×¦×¢×•×ª ×©× ×“×—×• âŒ',
                            data: rejectedData,
                            backgroundColor: 'rgba(220, 53, 69, 0.8)', // Reddish
                            borderColor: 'rgba(220, 53, 69, 1)',
                            borderWidth: 1,
                             borderRadius: 4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        tooltip: {
                            rtl: true,
                            callbacks: {
                                title: function(context) {
                                     const label = context[0].label;
                                     // Label is like "0-9". Extract the range.
                                     return `×”×¦×¢×” ×‘×˜×•×•×—: ${label}%`;
                                },
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                         // Remove icons from label for tooltip
                                        label = label.replace(/âœ…|âŒ/g, '').trim() + ': ';
                                    }
                                    label += context.raw;
                                    return label;
                                }
                            }
                        },
                        legend: {
                            rtl: true,
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: { size: 12, family: 'Varela Round' }
                            }
                        },
                        title: {
                            display: false, // Title handled by H3 outside canvas
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: '××¡×¤×¨ ×”×¦×¢×•×ª ×‘×˜×•×•×— ×–×”',
                                font: { size: 14, family: 'Varela Round' }
                            },
                             ticks: {
                                precision: 0
                            },
                             grid: {
                                drawOnChartArea: true // Keep grid lines
                             }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '×”×¦×¢×ª ×©×—×§×Ÿ 1 ×œ××§×‘×œ (××—×•×–×™× ××”×¡×›×•×)',
                                font: { size: 14, family: 'Varela Round' }
                            },
                             grid: {
                                drawOnChartArea: false // Remove x-axis grid lines
                            }
                        }
                    },
                    animation: {
                        duration: 1200, // Faster animation
                        easing: 'easeOutQuart'
                    }
                }
            });
        };

        // Helper to generate random integer
        const getRandomInt = (min, max) => {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min + 1)) + min;
        };

         // Function to get the bucket index for a percentage
        const getBucketIndex = (percentage) => {
            for (let i = 0; i < offerBucketRanges.length - 1; i++) {
                if (percentage >= offerBucketRanges[i] && percentage < offerBucketRanges[i + 1]) {
                    return i;
                }
            }
            return offerBucketRanges.length - 1; // Should not happen with 0-101 range
        };

        // Initialize visual buckets
        const initializeVisualBuckets = (numBuckets) => {
            offerBucketsBarContainer.innerHTML = ''; // Clear previous bars
             for (let i = 0; i < numBuckets; i++) {
                 const bucketBar = document.createElement('div');
                 bucketBar.classList.add('offer-bucket-bar');
                 // Set width based on number of buckets
                 bucketBar.style.width = `${100 / numBuckets}%`;
                 bucketBar.dataset.bucketIndex = i; // Store index

                 const acceptedSegment = document.createElement('div');
                 acceptedSegment.classList.add('bucket-segment', 'accepted');
                 acceptedSegment.style.height = '0%';

                 const rejectedSegment = document.createElement('div');
                 rejectedSegment.classList.add('bucket-segment', 'rejected');
                 rejectedSegment.style.height = '0%';

                 bucketBar.appendChild(rejectedSegment); // Rejected below accepted
                 bucketBar.appendChild(acceptedSegment);
                 offerBucketsBarContainer.appendChild(bucketBar);
             }
        };

        // Update visual buckets
        const updateVisualBuckets = (offerBuckets, totalRoundsCompleted) => {
             const buckets = offerBucketsBarContainer.querySelectorAll('.offer-bucket-bar');
             buckets.forEach(bar => {
                 const index = parseInt(bar.dataset.bucketIndex);
                 const bucketData = offerBuckets[index] || { accepted: 0, rejected: 0 };
                 const totalInBucket = bucketData.accepted + bucketData.rejected;

                 const acceptedHeight = totalInBucket > 0 ? (bucketData.accepted / totalRoundsCompleted) * 100 : 0;
                 const rejectedHeight = totalInBucket > 0 ? (bucketData.rejected / totalRoundsCompleted) * 100 : 0;

                 // Ensure total height doesn't exceed 100% based on completed rounds vs total rounds
                 const maxPossibleHeight = (totalInBucket / totalRoundsCompleted) * 100;


                 const acceptedSegment = bar.querySelector('.bucket-segment.accepted');
                 const rejectedSegment = bar.querySelector('.bucket-segment.rejected');

                 // Use heights relative to total rounds completed for visual scale
                 acceptedSegment.style.height = `${(bucketData.accepted / totalRoundsCompleted) * 100}%`;
                 rejectedSegment.style.height = `${(bucketData.rejected / totalRoundsCompleted) * 100}%`;

             });
        };


        startSimulationButton.addEventListener('click', async () => { // Use async to allow await for delay
            const totalAmount = parseInt(totalAmountInput.value);
            const numRounds = parseInt(numRoundsInput.value);
            const minAcceptancePercent = parseInt(minAcceptanceInput.value);
            const minAcceptanceAmount = (minAcceptancePercent / 100) * totalAmount;

            if (isNaN(totalAmount) || totalAmount <= 0) {
                alert('×× × ×”×›× ×¡ ×¡×›×•× ×›×¡×£ ×—×•×§×™ ×•×’×“×•×œ ×××¤×¡.');
                return;
            }
            if (isNaN(numRounds) || numRounds < 10) {
                 alert('×× × ×”×›× ×¡ ××¡×¤×¨ ×¡×‘×‘×™ ×¡×™××•×œ×¦×™×” ×—×•×§×™ (××™× ×™××•× 10).');
                 return;
            }
             if (isNaN(minAcceptancePercent) || minAcceptancePercent < 0 || minAcceptancePercent > 100) {
                 alert('×× × ×”×›× ×¡ ××—×•×– ×§×‘×œ×” ××™× ×™××œ×™ ×—×•×§×™ (×‘×™×Ÿ 0 ×œ-100).');
                 return;
            }

            // Disable button and show initial state
            startSimulationButton.disabled = true;
            startSimulationButton.querySelector('span').textContent = '××¨×™×¦×™× ×¡×™××•×œ×¦×™×”...';
            startSimulationButton.querySelector('i').innerHTML = 'â³'; // Change icon


            let acceptedCount = 0;
            let rejectedCount = 0;
            let totalShared = 0;

            // Data for chart and visual buckets (grouping offers by percentage)
            // Using array for offerBuckets to map directly to visual buckets by index
             const offerBuckets = Array.from({ length: offerBucketRanges.length - 1 }, () => ({ accepted: 0, rejected: 0 }));
             initializeVisualBuckets(offerBuckets.length); // Create the visual elements

            totalSimRoundsSpan.textContent = numRounds;
            roundsExecutedSpan.textContent = 0;
            acceptedCountSpan.textContent = 0;
            rejectedCountSpan.textContent = 0;
            acceptanceRateSpan.textContent = '0%';
            totalSharedSpan.textContent = 0;
            simulationProgressBar.style.width = '0%';


            // Simulate rounds
            for (let i = 0; i < numRounds; i++) {
                // Player 1 proposes a split (random offer for Player 2)
                // Offer for Player 2 is between 0 and totalAmount
                const offerToPlayer2 = getRandomInt(0, totalAmount);
                const offerPercent = Math.round((offerToPlayer2 / totalAmount) * 100);

                // Player 2 decides (based on minAcceptanceAmount)
                const accepted = offerToPlayer2 >= minAcceptanceAmount;

                // Find the correct bucket index for this offer percentage
                const bucketIndex = getBucketIndex(offerPercent);

                if (accepted) {
                    acceptedCount++;
                    totalShared += totalAmount; // Both get their share if accepted
                    if (offerBuckets[bucketIndex]) offerBuckets[bucketIndex].accepted++;
                } else {
                    rejectedCount++;
                     if (offerBuckets[bucketIndex]) offerBuckets[bucketIndex].rejected++;
                }

                // Update stats and visuals periodically
                 if ((i + 1) % Math.max(1, Math.floor(numRounds / 50)) === 0 || (i + 1) === numRounds) { // Update 50 times during sim
                    roundsExecutedSpan.textContent = i + 1;
                    acceptedCountSpan.textContent = acceptedCount;
                    rejectedCountSpan.textContent = rejectedCount;
                    acceptanceRateSpan.textContent = numRounds > 0 ? ((acceptedCount / (i + 1)) * 100).toFixed(1) + '%' : '0%'; // Calculate based on completed rounds
                    totalSharedSpan.textContent = totalShared;
                    simulationProgressBar.style.width = `${((i + 1) / numRounds) * 100}%`;

                     updateVisualBuckets(offerBuckets, i + 1); // Update visual bars
                 }

                 // Small delay for animation effect if desired, but let's run fast for speed
                 // await new Promise(resolve => setTimeout(resolve, 10)); // Add a small delay if needed

            }

            // Final updates after simulation loop
            roundsExecutedSpan.textContent = numRounds;
            acceptedCountSpan.textContent = acceptedCount;
            rejectedCountSpan.textContent = rejectedCount;
            acceptanceRateSpan.textContent = numRounds > 0 ? ((acceptedCount / numRounds) * 100).toFixed(1) + '%' : '0%';
            totalSharedSpan.textContent = totalShared;
            simulationProgressBar.style.width = '100%';
             updateVisualBuckets(offerBuckets, numRounds); // Final visual bucket update


            // Prepare data for the chart
            const chartLabels = offerBucketRanges.slice(0, -1).map((range, i) => {
                 const start = range;
                 const end = offerBucketRanges[i + 1] - (i === offerBucketRanges.length - 2 ? 1 : 0) -1 ; // Adjust end for last range
                 return `${start}-${end === 99 ? 100 : end}`;
            });

             const acceptedData = offerBuckets.map(bucket => bucket.accepted);
             const rejectedData = offerBuckets.map(bucket => bucket.rejected);


            createChart(chartLabels, acceptedData, rejectedData);

            // Re-enable button and reset text
            startSimulationButton.disabled = false;
            startSimulationButton.querySelector('span').textContent = '×”×¤×¢×œ ×¡×™××•×œ×¦×™×” × ×•×¡×¤×ª!';
             startSimulationButton.querySelector('i').innerHTML = 'â–¶ï¸'; // Reset icon

            console.log("Simulation finished");
        });


        // Toggle explanation visibility
        toggleExplanationButton.addEventListener('click', () => {
            const isHidden = explanationContent.style.display === 'none' || explanationContent.style.display === '';
            explanationContent.style.display = isHidden ? 'block' : 'none';
             // Optional: Scroll to explanation if showing
             if (isHidden) {
                 // Small delay to allow display:block to take effect before scrolling
                 setTimeout(() => {
                     explanationContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
                 }, 50);
             }
             toggleExplanationButton.textContent = isHidden ? '×”×¡×ª×¨ ×”×¡×‘×¨ ×¢×œ ×”××©×—×§' : '××” ×–×” ×‘×¢×¦×? ×”×¡×‘×¨ ×¢×œ ×”××©×—×§!';
        });


         // Initial chart creation (empty or example data)
         const initialChartLabels = offerBucketRanges.slice(0, -1).map((range, i) => {
                 const start = range;
                 const end = offerBucketRanges[i + 1] - (i === offerBucketRanges.length - 2 ? 1 : 0) -1 ;
                  return `${start}-${end === 99 ? 100 : end}`;
            });
         createChart(initialChartLabels, [], []); // Create an empty chart initially
         initializeVisualBuckets(offerBucketRanges.length - 1); // Initialize empty visual buckets

    });
</script>
---